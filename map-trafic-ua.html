<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo-UA-map</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.5.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.control.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Balsamiq+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Pacifico&family=Roboto+Slab:wght@100..900&family=Sofia+Sans:ital,wght@1,1..1000&family=Ysabeau+SC:wght@1..1000&display=swap" rel="stylesheet">
    
   
    
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
        }
        #map {
            
            height: 100%;
            width: 100%;
            /*font-family: 'Open Sans', sans-serif !important;*/
            font-family: "Balsamiq Sans", sans-serif;
            font-weight: 400;
            font-style: normal;
        }
        .export-import-tooltip{
            background-color: rgba(255, 255, 128, .5);
            
        }
        .imp-exp-block{
            display: flex;
            align-items: center;
            align-content: center;
            flex-direction: column;
            background-color: white; ;
            margin-top: 30%;
        }
        .leaflet-control{
            background: white;
            border: none !important;
            box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px !important;
        }
        .leaflet-control-layers-list{
            margin: 5px;
        }
        .leaflet-control-layers-list .leaflet-layerstree-header:hover{
            /*text-decoration: underline;*/
            background-color: rgb(240, 240, 240);
            cursor: pointer;
        }
        .leaflet-control-layers {
            transition: max-height 1s ease-out, opacity 0.3s ease-out;
            max-height: 20vh; 
            overflow: hidden;
            opacity: 1;
            }

            .leaflet-control-layers:hover {
            max-height: 100vh; 
            opacity: 1;
            }
        
        /*-------------------legend---------------*/

        .leaflet-legend {
            background: white;
            padding: 5px;
            margin: 10px;
            max-width: 210px;
            display: flex;
            flex-direction: column;        
            align-content: center;
            justify-content: center;
            border-radius: 5px;
            box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            /* –í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            gap: 8px; /* –í—ñ–¥—Å—Ç—É–ø –º—ñ–∂ —ñ–∫–æ–Ω–∫–æ—é —Ç–∞ —Ç–µ–∫—Å—Ç–æ–º */

        }

        .legend-icon {
            width: 20px;
            height: 20px;
            vertical-align: middle;
        }


        .leaflet-legend .l750{
            background: #ba1806;
        }
        .leaflet-legend .l400{
            background: #f505fa;
        }
        .leaflet-legend .l330{
            background: #0572a1;
        }
        .leaflet-legend .l220{
            background: green;
        }
        .leaflet-legend .l110{
            background: #b89023;
        }
        
        .leaflet-legend div{
            display: flex;
            flex-direction: row;
            margin: 5px;
        }

        .leaflet-legend i {
            min-width: 18px;
            min-height: 18px;
            max-width: 18px;
            max-height: 18px;
            float: left;
            margin-right: 8px;
            
            opacity: 0.7;
        }
        .leaflet-legend .ves {
            background: green;
            border-radius: 50%;
            border: 2px solid black;
        }
        .leaflet-legend .p35 {
            background: rgb(1, 33, 172);
            border-radius: 50%;
            border: 2px solid black;
        }
        .leaflet-legend .z700 {
            background: rgba(15, 207, 207, 0.479);
            border-radius: 50%;
            border: 2px solid rgb(0, 247, 255);
        }
        .leaflet-legend .ses {
            background: yellow;
            border-radius: 50%;
            border: 2px solid black;
        }
        .leaflet-legend .uze{
            background: #a92dad;
            border-radius: 50%;
            border: 2px solid purple;
        }
        .leaflet-legend .all{
            background: gray;
            border-radius: 50%;
            border: 2px solid black;
        }
        .custom-tooltip {
            background-color: rgba(255, 255, 255, 0.8);
            border: 1px solid black;
            padding: 5px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
        }
        .transperent{
            background-color: #0572a1;
        }
        .leaflet-tooltip.custom-tooltip1{
            margin-top: 1.5px;
            background-color: rgba(255, 255, 255, 0);
            box-shadow: none;
            border: none;
            font-size: 14px;
            font-weight: bold;
        }
        .leaflet-tooltip.custom-tooltip1:before {
            display: none !important; /* –í–∏–º–∏–∫–∞—î —Å—Ç—Ä—ñ–ª–æ—á–∫—É */
        }
        .leaflet-tooltip.custom-tooltip110{
            margin-top: 1.5px;
            background-color: rgba(255, 255, 255, 0);
            box-shadow: none;
            border: none;
            font-size: 14px;
            font-weight: bold;
        }
        .leaflet-tooltip.custom-tooltip110:before {
            display: none !important; /* –í–∏–º–∏–∫–∞—î —Å—Ç—Ä—ñ–ª–æ—á–∫—É */
        }
        .info-control {
            padding: 3.5px 3.5px 0px 3.5px;
            border-radius: 2px;
        }
        .info-control:hover {
            cursor: pointer;
        }
        .legend i {
            display: inline-block;
            width: 20px;
            height: 15px;
            margin-right: 8px;
            border: 1px solid black;
        }

        .layer-measureboundary {
    stroke: red !important; /* –ß–µ—Ä–≤–æ–Ω–∏–π –∫–æ–ª—ñ—Ä */
    stroke-width: 4px !important; /* –¢–æ–≤—â–∏–Ω–∞ */
    opacity: 0.8 !important; /* –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å */
}

/* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è –∫—ñ–Ω—Ü–µ–≤–æ—ó –ª—ñ–Ω—ñ—ó (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è) */
.layer-measure-resultline {
    stroke: rgb(255, 0, 0) !important; /* –°–∏–Ω—ñ–π –∫–æ–ª—ñ—Ä */
    stroke-width: 4px !important; /* –¢–æ–≤—â–∏–Ω–∞ */
    opacity: 1 !important;
}

/* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è –ø–ª–æ—â—ñ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è */
.layer-measure-resultarea {
    fill: rgba(192, 70, 77, 0.3) !important; /* –ü—Ä–æ–∑–æ—Ä–∏–π –∑–µ–ª–µ–Ω–∏–π */
    stroke: rgb(255, 0, 0) !important; /* –û–±–≤–µ–¥–µ–Ω–Ω—è –∑–µ–ª–µ–Ω–µ */
    stroke-width: 4px !important;
}

/* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è —Ç–æ—á–æ–∫ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è */
.layer-measurevertex {
    fill: rgb(255, 0, 0) !important;
    stroke: black !important;
    stroke-width: 4px;
    r: 6px; /* –†–∞–¥—ñ—É—Å —Ç–æ—á–∫–∏ */
}

.leaflet-pm-text {
    font-size: 20px;  /* –ó–∞–¥–∞–π—Ç–µ –±–∞–∂–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É */
    font-weight: bold; /* –ú–æ–∂–Ω–∞ —Ç–∞–∫–æ–∂ –∑–º—ñ–Ω–∏—Ç–∏ —Ç–æ–≤—â–∏–Ω—É —à—Ä–∏—Ñ—Ç—É */
    color: red; /* –ö–æ–ª—ñ—Ä —à—Ä–∏—Ñ—Ç—É */
}
.leaflet-bottom{
    position: absolute; 
    z-index:600 !important;
}

.leaflet-control-layers-list::-webkit-scrollbar {
    width: 8px; /* –¢–æ–≤—â–∏–Ω–∞ —Å–∫—Ä–æ–ª–±–∞—Ä—É */
}

/* –ö–æ–ª—ñ—Ä —Ñ–æ–Ω—É —Å–∫—Ä–æ–ª–±–∞—Ä—É */
.leaflet-control-layers-list::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 10px;
}

/* –ö–æ–ª—ñ—Ä —Ç–∞ –≤–∏–≥–ª—è–¥ –ø–æ–≤–∑—É–Ω–∫–∞ */
.leaflet-control-layers-list::-webkit-scrollbar-thumb {
    background: #3a3a3a;
    border-radius: 10px;
}

/* –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ –∑–º—ñ–Ω—é—î–º–æ –∫–æ–ª—ñ—Ä */
.leaflet-control-layers-list::-webkit-scrollbar-thumb:hover {
    background: #555;
}

input[type="checkbox"] {
  -webkit-appearance: none;
  appearance: none;
  background-color: transparent;
  margin: 0;

  font: inherit;
  color: currentColor;
  width: 1.15em;
  height: 1.15em;
  border: 0.15em solid currentColor;
  border-radius: 0.15em;
  transform: translateY(-0.075em);

  display: grid;
  place-content: center;
}
:root {
  --form-control-color: rgb(0, 0, 0);
  --form-control-disabled: #959495;
}
.leaflet-layerstree-header-label{
    display: inline-flex;
    align-items: center;
    gap: 0.5em; /* –í—ñ–¥—Å—Ç—É–ø –º—ñ–∂ —á–µ–∫–±–æ–∫—Å–æ–º —ñ —Ç–µ–∫—Å—Ç–æ–º */
    cursor: pointer;
}
.leaflet-layerstree-header-name b{
    font-size: 1.15em;
}
input[type="checkbox"] {
  appearance: none; /* –ü—Ä–∏–±–∏—Ä–∞—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Å—Ç–∏–ª—å */
  display: inline-flex; /* –ó–∞–º—ñ—Å—Ç—å inline-block, —â–æ–± –ø—Ä–∞—Ü—é–≤–∞–≤ ::before */
  align-items: center; /* –í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è */
  justify-content: center;
  width: 1.15em;
  height: 1.15em;
  border: 0.15em solid currentColor;
  border-radius: 0.15em;
  vertical-align: middle; /* –í–∏—Ä—ñ–≤–Ω—é—î –∑ —Ç–µ–∫—Å—Ç–æ–º */
  margin-right: 0.5em; /* –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ —Ç–µ–∫—Å—Ç—É */
  position: relative; /* –í–∞–∂–ª–∏–≤–æ –¥–ª—è ::before */
}

input[type="checkbox"]::before {
  content: "";
  width: 0.75em;  /* –ó–±—ñ–ª—å—à–µ–Ω–∏–π —Ä–æ–∑–º—ñ—Ä */
  height: 0.75em;
  clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
  transform: scale(0);
  transform-origin: bottom left;
  transition: 120ms transform ease-in-out;
  box-shadow: inset 1em 1em var(--form-control-color);
  background-color: CanvasText;
}

input[type="checkbox"]:checked::before {
  transform: scale(1);
}

input[type="checkbox"]:focus {
  outline: max(2px, 0.15em) solid currentColor;
  outline-offset: max(2px, 0.15em);
}

input[type="checkbox"]:disabled {
  --form-control-color: var(--form-control-disabled);
  color: var(--form-control-disabled);
  cursor: not-allowed;
}

input[type="radio"] {
  appearance: none;
  width: 1.15em;
  height: 1.15em;
  border: 0.15em solid currentColor;
  border-radius: 50%; /* –†–æ–±–∏—Ç—å –∫–Ω–æ–ø–∫—É –∫—Ä—É–≥–ª–æ—é */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-right: 0.5em;
  position: relative;
  vertical-align: middle;
}

input[type="radio"]::before {
  content: "";
  position: absolute;
  width: 0.65em;
  height: 0.65em;
  background-color: var(--form-control-color);
  border-radius: 50%;
  transform: scale(0);
  transition: 120ms transform ease-in-out;
}

input[type="radio"]:checked::before {
  transform: scale(1);
}

.wind-legend {
  opacity: 0; /* –ü–æ—á–∞—Ç–∫–æ–≤–æ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ */
  transform: translatex(-20px); /* –õ–µ–≥–∫–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è –ø–æ—è–≤–∏ –∑–Ω–∏–∑—É */
  transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
}

.wind-legend.show {
  opacity: 1;
  transform: translateY(0);
}
        
    </style>
</head>
<body>
    
    <div id="map"></div>

    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet.css" />
    
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.5.1/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/iso8601-js-period@0.2.1/iso8601.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/esri-leaflet.js"></script>
    
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/MarkerCluster.css" />
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/MarkerCluster.Default.css" />
<!--
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://jjimenezshaw.github.io/Leaflet.Control.Layers.Tree/L.Control.Layers.Tree.js"></script>
-->
    
    
    <!-- JavaScript –¥–ª—è MarkerCluster -->
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet.markercluster.js"></script>

    <!--line-->
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet-measure.css" />
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet-measure.js"></script>
    <!--tiffff-->
    <script src="https://cdn.jsdelivr.net/npm/georaster@1.6.0/dist/georaster.browser.bundle.min.js"></script>
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/georaster-layer-for-leaflet.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/rainbowvis.js@1.1.1/rainbowvis.js"></script>
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/geoblaze.web.min.js"></script>
    <!--derevo-->
    <link rel="stylesheet" href="L.Control.Layers.Tree.css">
    <script src="L.Control.Layers.Tree.js"></script>

    <!-- draw tool-------->
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet-geoman.css" />
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet-geoman.min.js"></script>
    <!--poligon pattern-->
<!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å—Ç–∏–ª—é –ø–ª–∞–≥—ñ–Ω–∞ Leaflet.Pattern -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-pattern/0.0.6/leaflet.pattern.min.css" />

    <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–∞–º–æ–≥–æ –ø–ª–∞–≥—ñ–Ω–∞ Leaflet.Pattern -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-pattern/0.0.6/leaflet.pattern.min.js"></script>
     <!-- –≥–ª–æ–±—É—Å -->
    <script src="https://unpkg.com/leaflet-globes"></script>
    <!-- –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –ø–æ—à—É–∫ -->
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/Control.Geocoder.css" />
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/Control.Geocoder.js"></script>


    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-auth.js";
        import { getStorage, ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-storage.js";
    
        const firebaseConfig = {
            apiKey: "AIzaSyAQpI0dCWKbXACbnNi445Hro26SzrlsGdU",
            authDomain: "my-map-pj-54751.firebaseapp.com",
            projectId: "my-map-pj-54751",
            storageBucket: "my-map-pj-54751.firebasestorage.app",
            messagingSenderId: "349429907738",
            appId: "1:349429907738:web:8a6d42bfeaf8eb0b612ca3",
            measurementId: "G-T4XGCQ6PDH"
        };
    
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app); // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ auth –æ–¥–∏–Ω —Ä–∞–∑
    
        onAuthStateChanged(auth, async (user) => {
            if (!user) {
                const currentUrl = window.location.href;
                const loginUrl = `https://mark-000.github.io/pl-power-vis-map.github.io/login.html?redirect=${encodeURIComponent(currentUrl)}`;
                window.location.href = loginUrl;
            } else {
                // –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π, –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –¥–∞–Ω—ñ
                const storage = getStorage(app); // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ firebaseApp –∑ —É–∂–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º auth
                try {
                    const urlGrabiv17 = await getDownloadURL(ref(storage, 'Grabiv/–ì—Ä–∞–±—ñ–≤ 17 –í–ï–£-332909 MWh.geojson'));
                    const urlGrabiv25 = await getDownloadURL(ref(storage, 'Grabiv/–ì—Ä–∞–±—ñ–≤ 25 –í–ï–£-481663 MWh.geojson'));
    
                    const dataGrabiv17 = await fetch(urlGrabiv17).then(r => r.json());
                    const dataGrabiv25 = await fetch(urlGrabiv25).then(r => r.json());

                    const urlKovel17 = await getDownloadURL(ref(storage, 'Kovel/–ö–æ–≤–µ–ª—å 17 –í–ï–£-329957 MWh-3290.geojson'));
                    const urlKovel25 = await getDownloadURL(ref(storage, 'Kovel/–ö–æ–≤–µ–ª—å 25 –í–ï–£-473797 MWh-3212.geojson'));
    
                    const dataKovel17 = await fetch(urlKovel17).then(r => r.json());
                    const dataKovel25 = await fetch(urlKovel25).then(r => r.json());

                    const urlLutsk17 = await getDownloadURL(ref(storage, 'Lutsk/–õ—É—Ü—å–∫ 17 –í–ï–£-341399 MWh-3404.geojson'));
                    const urlLutsk25 = await getDownloadURL(ref(storage, 'Lutsk/–õ—É—Ü—å–∫ 25 –í–ï–£-493208 MWh-3344.geojson'));
    
                    const dataLutsk17 = await fetch(urlLutsk17).then(r => r.json());
                    const dataLutsk25 = await fetch(urlLutsk25).then(r => r.json());

                    const urlRadiviliv17 = await getDownloadURL(ref(storage, 'Radiviliv/–†–∞–¥–∏–≤–∏–ª—ñ–≤ 17 –í–ï–£-323451 MWh- 3225.geojson'));
                    const urlRadiviliv25 = await getDownloadURL(ref(storage, 'Radiviliv/–†–∞–¥–∏–≤–∏–ª—ñ–≤ 25 –í–ï–£-467013 MWh- 3166.geojson'));
    
                    const dataRadiviliv17 = await fetch(urlRadiviliv17).then(r => r.json());
                    const dataRadiviliv25 = await fetch(urlRadiviliv25).then(r => r.json());

                    const urlTernopil17 = await getDownloadURL(ref(storage, 'Ternopil/–¢–µ—Ä–Ω–æ–ø—ñ–ª—å-17 –í–ï–£-339436 MWh.geojson'));
                    const urlTernopil25 = await getDownloadURL(ref(storage, 'Ternopil/–¢–µ—Ä–Ω–æ–ø—ñ–ª—å-25 –í–ï–£-488633 MWh.geojson'));
    
                    const dataTernopil17 = await fetch(urlTernopil17).then(r => r.json());
                    const dataTernopil25 = await fetch(urlTernopil25).then(r => r.json());

                    const urlBerdihiv10veu127966 = await getDownloadURL(ref(storage, 'Berdihiv/10veu127966MWh.geojson'));
                    const urlBerdihiv8veu108m = await getDownloadURL(ref(storage, 'Berdihiv/8 –í–ï–£-108–º 108024 MWh.geojson'));
                    const urlBerdihiv8veuNEW = await getDownloadURL(ref(storage, 'Berdihiv/8-–í–ï–£ –Ω–∞ –Ω–æ–≤–∏—Ö –ª–æ–∫–∞—Ü—ñ—è—Ö 114807MWh.geojson'));
                    const urlBerdihiv10veu119340 = await getDownloadURL(ref(storage, 'Berdihiv/berdihiv10veu 119340 MWh.geojson'));
    
                    const dataBerdihiv10veu127966 = await fetch(urlBerdihiv10veu127966).then(r => r.json());
                    const dataBerdihiv8veu108m = await fetch(urlBerdihiv8veu108m).then(r => r.json());
                    const dataBerdihiv8veuNEW = await fetch(urlBerdihiv8veuNEW).then(r => r.json());
                    const dataBerdihiv10veu119340 = await fetch(urlBerdihiv10veu119340).then(r => r.json());



                    const urlNekPidkluch = await getDownloadURL(ref(storage, 'nek-pidstancii-pidkluch.geojson'));
                    const dataNekPidkluch = await fetch(urlNekPidkluch).then(r => r.json());
    
    
                    window.loadedGeojsons = { dataGrabiv17, dataGrabiv25, dataKovel17, dataKovel25, dataLutsk17
                        , dataLutsk25, dataRadiviliv17, dataRadiviliv25, dataTernopil17, dataTernopil25, 
                        dataBerdihiv10veu127966, dataBerdihiv10veu119340, dataBerdihiv8veu108m, dataBerdihiv8veuNEW, dataNekPidkluch}; // –ø–µ—Ä–µ–¥–∞—î–º–æ –¥–∞–Ω—ñ –¥–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É
                    window.initMap(); // –≤–∏–∫–ª–∏–∫–∞—î–º–æ –ø–æ–±—É–¥–æ–≤—É –∫–∞—Ä—Ç–∏
                } catch (error) {
                    console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤:", error);
                }
            }
        });
    </script>






    <script>
    
      // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç–∏
    var map = L.map('map', {
        zoomControl: false, // –•–æ–≤–∞—î–º–æ –∫–æ–Ω—Ç—Ä–æ–ª –∑—É–º—É, —â–æ–± –Ω–µ –∑–∞–≤–∞–∂–∞–≤ –∞–Ω—ñ–º–∞—Ü—ñ—ó
        attributionControl: false, // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –∞—Ç—Ä–∏–±—É—Ü—ñ—é
        center: [20, 0], // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –≤–∏–≥–ª—è–¥ –Ω–∞ –≥–ª–æ–±—É—Å
        zoom: 2,
        globeView: true // –ê–∫—Ç–∏–≤—É—î–º–æ —Ä–µ–∂–∏–º –≥–ª–æ–±—É—Å–∞
    });
    
    
    
    window.initMap = function () {
        const { dataGrabiv17, dataGrabiv25, dataKovel17, dataKovel25, dataLutsk17, dataLutsk25
            , dataRadiviliv17, dataRadiviliv25, dataTernopil17, dataTernopil25,
            dataBerdihiv10veu127966, dataBerdihiv10veu119340, dataBerdihiv8veu108m, dataBerdihiv8veuNEW, dataNekPidkluch } = window.loadedGeojsons;
    
        var osmLayer = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18
        }).addTo(map);

        // –ó–∞—Ç—Ä–∏–º–∫–∞ –¥–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó - –æ–±–µ—Ä—Ç–∞–Ω–Ω—è –≥–ª–æ–±—É—Å–∞
        setTimeout(() => {
            map.flyTo([49.763967421708514, 27.982313845924605], 7, { // –ó–∞–¥–∞—î–º–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ç–∞ –∑—É–º
                animate: true,
                duration: 3 // –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –∞–Ω—ñ–º–∞—Ü—ñ—ó
            });
        });

            var legend = L.control({ position: 'bottomleft' });

            legend.onAdd = function (map) {
                var div = L.DomUtil.create('div', 'leaflet-legend');
                
                                div.innerHTML = `
                                    <div><i class="l750"></i>–ê–ï–°</div>
                                    <div><i class="l110"></i>–¢–ï–°</div>
                                    <div><i class="l330"></i>–ì–ï–°</div>
                                    <div class="legend-item"><svg class="legend-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path fill="#8B1A10" d="M200-440v-80h560v80H200Z"/></svg>750 –∫–í</div>
                                    <div class="legend-item"><svg class="legend-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path fill="#EA33F7" d="M200-440v-80h560v80H200Z"/></svg> 400 –∫–í</div>
                                    <div class="legend-item"><svg class="legend-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path fill="#2854C5" d="M200-440v-80h560v80H200Z"/></svg> 330 –∫–í</div>
                                    <div class="legend-item"><svg class="legend-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path fill="#48752C" d="M200-440v-80h560v80H200Z"/></svg> 220 –∫–í</div>
                                    <div class="legend-item"><svg class="legend-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path fill="#EAC452" d="M200-440v-80h560v80H200Z"/></svg> 110 –∫–í</div>
                                    <div><i class="z700"></i> –°–ó–ó</div>
                                    <div><i class="uze"></i> –í–ï–° –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ñ–≤</div>
                                    <div><i class="ves"></i> –î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å 110 –∫–í</div>
                                    <div><i class="p35"></i> –î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å 35 –∫–í</div>
                                    <div><i class="ses"></i> –î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å —ñ–∑ —Ç–µ—Ö–Ω—ñ—á–Ω–∏–º–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏ –ø—Ä–∏—î–¥–Ω–∞–Ω–Ω—è</div>
                                `;                
                return div;
            };

            // –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–ª–∏—Ç–æ–∫ –∫–∞—Ä—Ç–∏ (OpenStreetMap)
        var WhiteLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png');

            

            // –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–ª–∏—Ç–æ–∫ Google Maps
            var googleLayer = L.tileLayer('http://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}', {
                attribution: 'Google Maps'
            });
            //topo map
            var topoLayer = L.tileLayer('https://tile.opentopomap.org/{z}/{x}/{y}.png', {
                attribution: 'opentopomap'
            });

        // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è OpenStreetMap
        //  osmLayer.addTo(map);
        var coordDiv = L.control({ position: 'bottomright' });

    coordDiv.onAdd = function () {
        var div = L.DomUtil.create('div', 'coordinate-display');
        div.style.padding = '5px';
        div.style.background = 'white';
        div.style.opacity = '0.8';
        div.style.cursor = 'pointer'; // –î–æ–¥–∞—î–º–æ —Å—Ç–∏–ª—å –¥–ª—è –≤–∫–∞–∑—ñ–≤–Ω–∏–∫–∞ –º–∏—à—ñ
        div.innerHTML = "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏:";
        
        // –î–æ–¥–∞—î–º–æ –ø–æ–¥—ñ—é –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ø—Ä–∏ –∫–ª—ñ–∫—É
        div.addEventListener('click', function () {
            const text = div.innerText.replace('–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏:', '').trim();
            navigator.clipboard.writeText(text).then(() => {
                div.innerHTML = `‚úÖ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ ${text}`;
                setTimeout(updateCenterCoordinates, 1500); // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –Ω–∞–∑–∞–¥ —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥–∏
            }).catch(err => console.error("–ü–æ–º–∏–ª–∫–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:", err));
        });

        return div;
    };

    coordDiv.addTo(map);

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ü–µ–Ω—Ç—Ä—É –∫–∞—Ä—Ç–∏
    function updateCenterCoordinates() {
        var center = map.getCenter();
        document.querySelector('.coordinate-display').innerHTML = 
            `${center.lat.toFixed(6)}, ${center.lng.toFixed(6)}`;
    }

    // –û–Ω–æ–≤–ª—é—î–º–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –ø—Ä–∏ —Ä—É—Å—ñ –∫–∞—Ä—Ç–∏
    map.on('moveend', updateCenterCoordinates);

    // –û–Ω–æ–≤–ª—é—î–º–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
    updateCenterCoordinates();

        L.Control.Info = L.Control.extend({
                onAdd: function(map) {
                    var container = L.DomUtil.create("div", "info-control");
                    container.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="black"><path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>';
                    container.title = "–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –¥–ª—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó";
                    
                    container.onclick = function() {
                        alert("üìå –î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–∞–¥–∞—Å—Ç—Ä–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –ø—Ä–∞–≤–æ—é –∫–Ω–æ–ø–∫–æ—é –º–∏—à—ñ –Ω–∞ –∫–∞—Ä—Ç—É.\nüìå –ü—ñ—Å–ª—è –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –±—É–¥–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ —Ç–∞–π–ª –∑ –∫–∞–¥–∞—Å—Ç—Ä–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏.\nüìå –î–ª—è –æ—á–∏—â–µ–Ω–Ω—è –∫–∞—Ä—Ç–∏ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–æ–ª–µ—Å–∏–∫–æ –º–∏—à—ñ.");
                    };
            
                    return container;
                }
            });

            // –î–æ–¥–∞—î–º–æ –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ –∫–∞—Ä—Ç—É
            var infoControl = new L.Control.Info({ position: "topleft" });
            map.addControl(infoControl);
    //-----------------------------–º–∞–ª—é–≤–∞–Ω–Ω—è - –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è--------------------------------------
            var measureControl = new L.Control.Measure({
                position: "topleft",
                primaryLengthUnit: "meters",
                secondaryLengthUnit: "kilometers", // –û–¥–∏–Ω–∏—Ü—ñ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è
                primaryAreaUnit: "hectares",
                secondaryAreaUnit: "sqmeters",
                showMeasurements: true, // –ü–æ–∫–∞–∑—É—î –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –ª—ñ–Ω—ñ–π
                captureZIndex: 10000,
                measureControlTitle: "–í–∏–º—ñ—Ä—è—Ç–∏ –≤—ñ–¥—Å—Ç–∞–Ω—å",
                activeColor: '#ff0000',  // –ö–æ–ª—ñ—Ä –ª—ñ–Ω—ñ—ó –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è
                completedColor: '#0000ff'
                
            });

            map.addControl(measureControl);

            
            // –î–æ–¥–∞—î–º–æ –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ –∫–∞—Ä—Ç—É
            map.pm.addControls({
                position: 'bottomright', // –†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è –ø–∞–Ω–µ–ª—ñ
                drawCircle: true,
                drawRectangle: false,
                drawPolygon: true, 
                drawMarker: false, // –í–∏–º–∫–Ω—É—Ç–∏ —Ç–æ—á–∫–∏
                drawCircleMarker: false, // –í–∏–º–∫–Ω—É—Ç–∏ –∫—Ä—É–≥–ª—ñ –º–∞—Ä–∫–µ—Ä–∏
                drawText: true, // –í–∏–º–∫–Ω—É—Ç–∏ —Ç–µ–∫—Å—Ç
                measureControl: true,
                editMode: false, // –í–∏–º–∏–∫–∞—î —Ä–µ–∂–∏–º —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
                cutPolygon: false,
                rotateMode: false,
            });

            // 4. –í–∫–ª—é—á–∞—î–º–æ —Ä–µ–∂–∏–º –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –¥–æ–≤–∂–∏–Ω–∏/–ø–ª–æ—â—ñ
            map.pm.setGlobalOptions({
                measureControl: true,  // –î–æ–¥–∞—î –∫–Ω–æ–ø–∫—É –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è
                allowSelfIntersection: true, // –í–∏–º–∏–∫–∞—î –ø–µ—Ä–µ—Ç–∏–Ω —Å–∞–º–∏—Ö —Å–µ–±–µ
                cutPolygon: false, // –í–∏–º–∏–∫–∞—î –≤–∏—Ä—ñ–∑–∞–Ω–Ω—è –ø–æ–ª—ñ–≥–æ–Ω—ñ–≤
                editMode: false,
                rotateMode: false,
                snappable: false,
            });

            map.pm.setPathOptions({
                color: 'red',        // –ö–æ–ª—ñ—Ä –ª—ñ–Ω—ñ–π
                fillColor: 'red',   // –ö–æ–ª—ñ—Ä –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø–æ–ª—ñ–≥–æ–Ω—ñ–≤
                fillOpacity: 0,    // –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –ø–æ–ª—ñ–≥–æ–Ω—ñ–≤
                weight: 2           // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
            });

            let distanceTooltip;
        
            map.on('pm:drawstart', function (e) {
                if (e.workingLayer instanceof L.Polyline) {
                    let totalDistance = 0;
                    let lastLatLng = null;

                    e.workingLayer.on('pm:vertexadded', function (event) {
                        let latlngs = e.workingLayer.getLatLngs();
                        let currentLatLng = latlngs[latlngs.length - 1]; 

                        if (lastLatLng !== null) {
                            totalDistance += lastLatLng.distanceTo(currentLatLng);
                        }
                        lastLatLng = currentLatLng;

                        if (distanceTooltip) {
                            map.removeLayer(distanceTooltip);
                        }

                        distanceTooltip = L.tooltip({
                            permanent: false,
                            direction: 'top',
                            className: 'distance-tooltip'
                        })
                            .setLatLng(currentLatLng)
                            .setContent(`${totalDistance.toFixed(2)} –º`)
                            .addTo(map);
                    });

                    map.once('pm:drawend', function () {
                        if (distanceTooltip) {
                            map.removeLayer(distanceTooltip);
                        }
                    });
                }
            });




    map.on('pm:drawstart', function (e) {
        if (e.workingLayer instanceof L.Circle) {
            let centerLatLng = null;

            // –°–ª—É—Ö–∞—á –ø–æ–¥—ñ—ó –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ü–µ–Ω—Ç—Ä—É –∫–æ–ª–∞
            map.on('click', function setCenter(event) {
                centerLatLng = event.latlng; // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ü–µ–Ω—Ç—Ä –∫–æ–ª–∞ –Ω–∞ –ø–µ—Ä—à–µ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –∫–∞—Ä—Ç—É
                map.off('click', setCenter); // –í–∏–º–∏–∫–∞—î–º–æ —Å–ª—É—Ö–∞—á–∞ –ø—ñ—Å–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ü–µ–Ω—Ç—Ä—É

                // –û–Ω–æ–≤–ª—é—î–º–æ —Ç—É–ª—Ç—ñ–ø –ø—ñ–¥ —á–∞—Å –º–∞–ª—é–≤–∞–Ω–Ω—è
                let moveListener = function (event) {
                    let currentLatLng = event.latlng;
                    let radius = centerLatLng.distanceTo(currentLatLng); // –í—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ —Ü–µ–Ω—Ç—Ä—É –∫–æ–ª–∞ –¥–æ –ø–æ—Ç–æ—á–Ω–æ—ó —Ç–æ—á–∫–∏

                    // –í–∏–¥–∞–ª—è—î–º–æ —Å—Ç–∞—Ä–∏–π —Ç—É–ª—Ç—ñ–ø
                    if (distanceTooltip) {
                        map.removeLayer(distanceTooltip);
                    }

                    // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π —Ç—É–ª—Ç—ñ–ø –±—ñ–ª—è –∫—É—Ä—Å–æ—Ä–∞
                    distanceTooltip = L.tooltip({
                        permanent: false,
                        direction: 'top',
                        className: 'distance-tooltip'
                    })
                        .setLatLng(currentLatLng) // –ü–æ–∑–∏—Ü—ñ—è —Ç—É–ª—Ç—ñ–ø–∞ –±—ñ–ª—è –∫—É—Ä—Å–æ—Ä–∞
                        .setContent(`–†–∞–¥—ñ—É—Å: ${radius.toFixed(2)} –º`)
                        .addTo(map);
                };

                map.on('mousemove', moveListener); // –î–æ–¥–∞—î–º–æ —Å–ª—É—Ö–∞—á–∞ –¥–ª—è –ø–æ–¥—ñ—ó mousemove –ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü–µ–Ω—Ç—Ä—É

                // –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –º–∞–ª—é–≤–∞–Ω–Ω—è –∫–æ–ª–∞
                map.once('pm:drawend', function () { // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `once` –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–¥—ñ—é —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑
                    map.removeLayer(distanceTooltip);
                    map.off('mousemove', moveListener); // –í–∏–º–∏–∫–∞—î–º–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—É–ª—Ç—ñ–ø–∞ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –º–∞–ª—é–≤–∞–Ω–Ω—è
                });
            });
        }
    });

    var selectedPolygon = null; // –¢—É—Ç –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤–∏–±—Ä–∞–Ω–∏–π –ø–æ–ª—ñ–≥–æ–Ω

    // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –∫–ª—ñ–∫—É –Ω–∞ –ø–æ–ª—ñ–≥–æ–Ω –¥–ª—è –≤–∏–±–æ—Ä—É
    map.on('pm:create', function (e) {
        e.layer.on('click', function () {
            if (selectedPolygon) {
                selectedPolygon.setStyle({ color: 'red' }); // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –∫–æ–ª—ñ—Ä
            }
            selectedPolygon = this;
            selectedPolygon.setStyle({ color: 'blue' }); // –í–∏–¥—ñ–ª—è—î–º–æ –≤–∏–±—Ä–∞–Ω–∏–π –ø–æ–ª—ñ–≥–æ–Ω
        });
    });

    // –§—É–Ω–∫—Ü—ñ—è –µ–∫—Å–ø–æ—Ä—Ç—É –≤–∏–±—Ä–∞–Ω–æ–≥–æ –ø–æ–ª—ñ–≥–æ–Ω—É
    function exportSelectedGeoJSON() {
        if (!selectedPolygon) {
            alert("–í–∏–±–µ—Ä—ñ—Ç—å –ø–æ–ª—ñ–≥–æ–Ω, –∫–ª—ñ–∫–Ω—É–≤—à–∏ –Ω–∞ –Ω—å–æ–≥–æ!");
            return;
        }

        // –û—Ç—Ä–∏–º—É—î–º–æ GeoJSON
        var geojsonFeature = selectedPolygon.toGeoJSON();
        var geojsonString = JSON.stringify(geojsonFeature, null, 2);

        // –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É
        var blob = new Blob([geojsonString], { type: "application/json" });
        var link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "selected_polygon.geojson";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }

    // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—ñ–≥–æ–Ω—É
    var downloadButton = L.control({ position: "bottomright" });

    downloadButton.onAdd = function (map) {
        var div = L.DomUtil.create("div", "leaflet-bar leaflet-control leaflet-control-custom");
        div.innerHTML = '<button style="background:#fff;border:1px solid #ccc;padding:5px 5px;cursor:pointer;">‚¨áÔ∏è</button>';
        div.onclick = exportSelectedGeoJSON;
        return div;
    };

    // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –Ω–∞ –∫–∞—Ä—Ç—É


    downloadButton.addTo(map);

    L.Control.geocoder({
        position: "topleft",
        defaultMarkGeocode: false
    }).on('markgeocode', function(e) {
        map.setView(e.geocode.center, 15);
    }).addTo(map);




    //-----------------------------–±—É–¥—É–≤–∞–Ω–Ω—è —à–∞—Ä—ñ–≤--------------------------------------    


    //-----------------------------–µ–ª–µ–∫—Ç—Ä–æ–º–µ—Ä–µ–∂—ñ--------------------------------------    
        
    //-----------------------------–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –Ω–µ–∫--------------------------------------
            var prelunJsonUrl = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/ukr-pidst.geojson';
            var geoJsonClusterGroup = L.markerClusterGroup({
                spiderfyOnMaxZoom: true, // –†–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è –∫–ª–∞—Å—Ç–µ—Ä—ñ–≤ –ø—Ä–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É –º–∞—Å—à—Ç–∞–±—ñ
                showCoverageOnHover: false, // –í—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –æ–±–ª–∞—Å—Ç—ñ –∫–ª–∞—Å—Ç–µ—Ä—É –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ
                zoomToBoundsOnClick: true, // –ê–≤—Ç–æ–∑–±—ñ–ª—å—à–µ–Ω–Ω—è –ø—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä
                spiderLegPolylineOptions: {
                    weight: 0,
                },
                spiderfyShapePositions: function (count, centerPt) {
                    var radius = 40; // –†–∞–¥—ñ—É—Å —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è
                    var angleStep = (2 * Math.PI) / count;
                    return Array.from({ length: count }, (_, i) => {
                        var angle = i * angleStep;
                        return new L.Point(
                            centerPt.x + radius * Math.cos(angle),
                            centerPt.y + radius * Math.sin(angle)
                        );
                    });
                },iconCreateFunction: function (cluster) {
                    var sumvmerezu = 0;
                    cluster.getAllChildMarkers().forEach(function (marker) {
                        var value1 = marker.feature.properties["–†–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å (–∑–∞ –¢–£), –ú–í—Ç"];
                        if (!isNaN(value1)) {
                            sumvmerezu += parseFloat(Math.round(value1));
                        }
                    });
                    // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–∫–æ–Ω–∫–∏
                    return L.divIcon({
                        html: `
                            <div style="background-color: rgba(0, 123, 255, 0.6); 
                                        font-size: 15px;
                                        border-radius: 50%; 
                                        display: flex;
                                        justify-content: center;
                                        align-items: center;
                                        flex-direction: column;
                                        width: 50px; 
                                        height: 50px; 
                                        text-align: center; 
                                        color: white; 
                                        font-weight: bold;">
                                <div style="color: black;">${sumvmerezu}</div>
                                
                            </div>
                        `,
                        className: 'custom-cluster-icon',
                        iconSize: [50, 50]
                    });
                }
            });

            // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–ª—å–æ—Ä—É –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ Rodzaj instalacji
            function getColorByInstallationType(type) {
                if (type === '–°–ï–°') {
                    return 'purple'; // –§—ñ–æ–ª–µ—Ç–æ–≤–∏–π
                } else if (type === '–í–ï–°') {
                    return 'blue'; // –°–∏–Ω—ñ–π
                } else if (type === '–£–ó–ï') {
                    return 'orange'; // –ü–æ–º–∞—Ä–∞–Ω—á–µ–≤–∏–π
                } else {
                    return 'gray'; // –°—ñ—Ä–∏–π (–¥–ª—è —ñ–Ω—à–∏—Ö –∑–Ω–∞—á–µ–Ω—å)
                }
            }

            fetch(prelunJsonUrl)
                .then(response => response.json())
                .then(geojsonData => {
                    var gprelunJsonLayer = L.geoJSON(geojsonData, {
                        pointToLayer: function (feature, latlng) {
                        var color = getColorByInstallationType(feature.properties['–í–∏–¥ –¥–∂–µ—Ä–µ–ª–∞ –µ–Ω–µ—Ä–≥—ñ—ó']);
                        var marker = L.circleMarker(latlng, {
                            radius: 8,
                            fillColor: color,
                            color: color,
                            weight: 1,
                            opacity: 1,
                            fillOpacity: 1
                        });

                        // –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—ñ–¥–ø–∏—Å—É
                        marker.bindTooltip(`
                            
                            ${feature.properties['–†–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å (–∑–∞ –¢–£), –ú–í—Ç'] || '–ù–µ–≤—ñ–¥–æ–º–æ'}<br>
                        `, {
                            permanent: true,
                            direction: 'top',
                            className: 'custom-tooltip1'
                        });
                        marker.bindPopup(`
                            <b>–ü–° 220-750 –∫–í:</b> ${feature.properties['–ü–° 220-750 –∫–í'] || '–ù–µ–≤—ñ–¥–æ–º–æ'}<br>
                            <b>–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å:</b> ${feature.properties['–†–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å (–∑–∞ –¢–£), –ú–í—Ç'] || '–ù–µ–≤—ñ–¥–æ–º–æ'} –ú–í—Ç<br>
                        `);

                        return marker;
                    }
                    });
                    geoJsonClusterGroup.addLayer(gprelunJsonLayer); 
                //-------------------------------------------------------------------
            var geojsonukrline = "https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/ukr-line-filter-all.geojson"
            fetch(geojsonukrline)
                .then(response => response.json())
                .then(reconsGeojsonData => {
                    var reconsLayer = L.geoJSON(reconsGeojsonData, {
                        style: function(feature) {
                            // –õ–æ–≥—ñ–∫–∞ –¥–ª—è –∑–º—ñ–Ω–∏ –∫–æ–ª—å–æ—Ä—É –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –∑–Ω–∞—á–µ–Ω–Ω—è voltage
                            if (feature.properties.voltage && feature.properties.voltage.includes('220')) {
                                return { color: 'green', weight: 2.5, opacity: 1 }; // –ó–µ–ª–µ–Ω–∏–π –¥–ª—è 220
                            } else if (feature.properties.voltage && feature.properties.voltage.includes('400')) {
                                return { color: '#f505fa', weight: 2.5, opacity: 1 }; // –ß–µ—Ä–≤–æ–Ω–∏–π –¥–ª—è 400
                            }else if (feature.properties.voltage && feature.properties.voltage.includes('750')) {
                                return { color: '#ba1806', weight: 2.5, opacity: 1 }; // –ß–µ—Ä–≤–æ–Ω–∏–π –¥–ª—è 400
                            } else {
                                return { color: '#0572a1', weight: 2.5, opacity: 1 }; // –§—ñ–æ–ª–µ—Ç–æ–≤–∏–π –¥–ª—è –≤—Å—å–æ–≥–æ —ñ–Ω—à–æ–≥–æ
                            }
                        },
                        onEachFeature: function(feature, layer) {
                            layer.bindPopup(`
                                <b>–ù–∞–∑–≤–∞:</b> ${feature.properties.name || 'Unknown'}<br>
                                <b>–ù–∞–ø—Ä—É–≥–∞:</b> ${feature.properties.voltage || 'Unknown'}
                            `);
                        }
                    });
    //-------------------------------------------------------------------
            var geojsonukrline110 = "https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/line-ua-110-150.geojson"
            fetch(geojsonukrline110)
                .then(response => response.json())
                .then(reconsGeojsonData => {
                    var Layer110 = L.geoJSON(reconsGeojsonData, {
                        style: function(feature) {
                            // –õ–æ–≥—ñ–∫–∞ –¥–ª—è –∑–º—ñ–Ω–∏ –∫–æ–ª—å–æ—Ä—É –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –∑–Ω–∞—á–µ–Ω–Ω—è voltage
                            if (feature.properties.voltage && feature.properties.voltage.includes('110')) {
                                return { color: '#b89023', weight: 1.5, opacity: 1 }; // –ó–µ–ª–µ–Ω–∏–π –¥–ª—è 220
                            }  else {
                                return { color: '#b89023', weight: 1.5, opacity: 1 }; // –§—ñ–æ–ª–µ—Ç–æ–≤–∏–π –¥–ª—è –≤—Å—å–æ–≥–æ —ñ–Ω—à–æ–≥–æ
                            }
                        },
                        onEachFeature: function(feature, layer) {
                            layer.bindPopup(`
                                <b>–ù–∞–∑–≤–∞:</b> ${feature.properties.name || 'Unknown'}<br>
                                <b>–ù–∞–ø—Ä—É–≥–∞:</b> ${feature.properties.voltage || 'Unknown'}
                            `);
                        }
                    });
                    //-------------------------------------------------------------------
            var geojsonUrlBorder = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/Ukraine_Border.geojson';
            map.createPane('borderPane');
                //map.getPane('borderPane').style.zIndex = 400;
                    fetch(geojsonUrlBorder)
                        .then(response => response.json())
                        .then(borderGeojsonData => {
                            borderLayer = L.geoJSON(borderGeojsonData, {
                                pane: 'borderPane',
                                style: {
                                    color: '#595857', // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                                    weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                                    fillOpacity: 0
                                },
                                interactive: false
                            });
    //-------------------------------------------------------------------
            var geojsonUrlbuffer50kmpidst = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/buffer-for-proekty-50km.geojson';
                //map.getPane('borderPane').style.zIndex = 400;
                fetch(geojsonUrlbuffer50kmpidst)
                    .then(response => response.json())
                    .then(borderGeojsonData => {
                        buffer50pidstLayer = L.geoJSON(borderGeojsonData, {
                            style: {
                                color: '#f5076a', // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                                weight: 2, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                                fillOpacity: 0,
                            },
                            interactive: false
                        });
                    //-------------------------------------------------------------------                                     
            var geojsonUrlNEK = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/nek-substations.geojson';
            fetch(geojsonUrlNEK)
                .then(response => response.json())
                .then(projektyGeojsonData => {
                    NEKLayer = L.geoJSON(projektyGeojsonData, {
                        pointToLayer: function(feature, latlng) {
                            return L.circleMarker(latlng, {
                                radius: 6, // –†–∞–¥—ñ—É—Å —Ç–æ—á–∫–∏
                                fillColor: "black", // –ö–æ–ª—ñ—Ä –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è
                                color: "yellow", // –ö–æ–ª—ñ—Ä –æ–±–≤–µ–¥–µ–Ω–Ω—è
                                weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –æ–±–≤–µ–¥–µ–Ω–Ω—è
                                opacity: 1, // –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –æ–±–≤–µ–¥–µ–Ω–Ω—è
                                fillOpacity: 1 // –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è
                            });
                        },
                        onEachFeature: function(feature, layer) {
                            layer.bindPopup(`
                                <b>–ü—ñ–¥—Å—Ç–∞–Ω—Ü—ñ—è:</b> ${feature.properties.Substation || 'Unknown'}<br>
                                <b>–õ–æ–∫–∞—Ü—ñ—è:</b> ${feature.properties.Location || 'Unknown'}<br>
                                <b>–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä–∏:</b> ${feature.properties.Transformers || 'Unknown'}
                            `);
                        }
                    });
            var geojsonUrlPUA = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/p-stations-ua.geojson';
            fetch(geojsonUrlPUA)
                .then(response => response.json())
                .then(projektyGeojsonData => {
                    PUALayer = L.geoJSON(projektyGeojsonData, {
                        pointToLayer: function(feature, latlng) {
                            var size = feature.properties.power / 1500; // –†–æ–∑–º—ñ—Ä –∫–≤–∞–¥—Ä–∞—Ç–∞ (–º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π)
                            const size2 = Math.sqrt(size) * 2;
                            // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∫–æ–ª—ñ—Ä –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–∏–ø—É —Å—Ç–∞–Ω—Ü—ñ—ó
                            var color;
                            switch (feature.properties.type) {
                                case '–ê–ï–°':
                                    color = '#8B1A10'; // –ß–µ—Ä–≤–æ–Ω–∏–π –¥–ª—è –ê–ï–°
                                    break;
                                case '–¢–ï–°':
                                    color = '#b89023'; // –ñ–æ–≤—Ç–∏–π –¥–ª—è –¢–ï–°
                                    break;
                                case '–ì–ï–°':
                                case '–ì–ê–ï–°':
                                    color = '#0572a1'; // –°–∏–Ω—ñ–π –¥–ª—è –ì–ï–° –∞–±–æ –ì–ï–ê–°
                                    break;
                                default:
                                    color = 'black'; // –ö–æ–ª—ñ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
                                    break;
                            }
                            const squareIcon = L.divIcon({
                                className: 'custom-marker',
                                html: `<div style="
                                    width: ${size2 * 15}px;
                                    height: ${size2 * 15}px;
                                    background-color: ${color};
                                    opacity: 0.7;
                                    border: 1px solid black;
                                    transform: translate(-50%, -50%);
                                    box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;
                                "></div>`,
                                iconSize: [size * 17, size * 17], // –ú–æ–∂–Ω–∞ –ø—ñ–¥–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ä–æ–∑–º—ñ—Ä–∏
                                iconAnchor: [size, size], // –¶–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è —ñ–∫–æ–Ω–∫–∏
                            });
                            return L.marker(latlng, { icon: squareIcon });
                        },
                        onEachFeature: function(feature, layer) {
                            layer.bindPopup(`
                                <b style='font-size: 15px;'> ${feature.properties.station || 'Unknown'}</b><br>
                                <b>–¢–∏–ø:</b> ${feature.properties.type || 'Unknown'}<br>
                                <b>–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å:</b> ${feature.properties.power || 'Unknown'} –ú–í—Ç
                            `);
                        }
                    });


            
                    var layerPotuznist35 = L.geoJSON(dataNekPidkluch, {
                        filter: function(feature) {
                            return feature.properties.potuznist35 != null && feature.properties.potuznist35 > 0;
                        },
                        pointToLayer: function(feature, latlng) {
                            let power = feature.properties.potuznist35;
                            let marker = L.circleMarker(latlng, {
                                radius: Math.sqrt(power) * 1.2, // –†–æ–∑–º—ñ—Ä —Ç–æ—á–∫–∏ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ
                                fillColor: "blue",
                                color: "black",
                                weight: 1,
                                opacity: 1,
                                fillOpacity: 0.8
                            });
                            let tooltipOffset = -Math.sqrt(power) * 1.2; 
                            marker.bindTooltip(`${power}`, {
                                permanent: true,
                                direction: 'top',
                                className: 'custom-tooltip110', // –ó–º—ñ–Ω–µ–Ω–æ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –∫–ª–∞—Å
                                offset: [0, tooltipOffset]
                            });
                            marker.bindPopup(`
                                <b>–ü–°:</b> ${feature.properties.pidstancia}<br>
                                <b>–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –ø–æ 35–∫–≤:</b> ${power} –ú–í—Ç<br>
                            `);
                            return marker;
                        }
                    });
                    // –®–∞—Ä –¥–ª—è potuznist110
                    var clusterGroup110 = L.markerClusterGroup({
                        showCoverageOnHover: false,
                        iconCreateFunction: function(cluster) {
                            let markers = cluster.getAllChildMarkers();
                            let totalPower = markers.reduce((sum, marker) => sum + (marker.options.power || 0), 0);
                            return L.divIcon({
                                html: `<div style="background-color: green;
                                            opacity: 0.8;
                                            font-size: 15px;
                                            border-radius: 50%; 
                                            display: flex;
                                            justify-content: center;
                                            align-items: center;
                                            flex-direction: column;
                                            width: 50px; 
                                            height: 50px; 
                                            text-align: center; 
                                            color: white; 
                                            font-weight: bold;">
                                    ${totalPower}
                                </div>`,
                                className: 'custom-cluster',
                                iconSize: [40, 40]
                            });
                        }
                    });
            // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ GeoJSON
            
                    var layerPotuznist110 = L.geoJSON(dataNekPidkluch, {
                        filter: function(feature) {
                            return feature.properties.potuznist110 != null && feature.properties.potuznist110 > 0;
                        },
                        pointToLayer: function(feature, latlng) {
                            let power = feature.properties.potuznist110;
                            let pidstancia = feature.properties.pidstancia.toLowerCase(); // –ü—Ä–∏–≤–æ–¥–∏–º–æ –¥–æ –Ω–∏–∂–Ω—å–æ–≥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è
                        
                            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Å–ª—ñ–≤ "—Ä–æ–∑–¥—ñ–ª" –∞–±–æ "–∑–∞—Ö—ñ–¥–Ω–∞"
                            let fillColor = "green"; // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∑–µ–ª–µ–Ω–∏–π
                            if (pidstancia.includes("—Å—Ç—Ä–∏–π") || pidstancia.includes("–∫–∞–ª—É—à") || pidstancia.includes("–≤–æ–ª–æ–≤–µ—Ü—å") || pidstancia.includes("—Ç–µ—Ä–Ω–æ–ø—ñ–ª—å—Å—å–∫–∞" || pidstancia.includes("—Ö–º–µ–ª—å–Ω–∏—Ü—å–∫–∞"))) {
                                fillColor = "yellow"; // –ó–º—ñ–Ω—é—î–º–æ –∫–æ–ª—ñ—Ä –Ω–∞ –∂–æ–≤—Ç–∏–π, —è–∫—â–æ —É–º–æ–≤–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è
                            }
                        
                            let marker = L.circleMarker(latlng, {
                                radius: Math.sqrt(power) * 1.2, // –†–æ–∑–º—ñ—Ä —Ç–æ—á–∫–∏ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ
                                fillColor: fillColor,
                                color: "black",
                                weight: 1,
                                opacity: 1,
                                fillOpacity: 0.8
                            });
                        
                            let tooltipOffset = -Math.sqrt(power) * 1.2;
                        
                            marker.bindTooltip(`
                                    ${power}<br>
                                `, {
                                    permanent: true,
                                    direction: 'top',
                                    className: 'custom-tooltip110',
                                    offset: [0, tooltipOffset]
                                });
                            marker.bindPopup(`
                                    <b>–ü–°:</b> ${feature.properties.pidstancia}<br>
                                    <b>–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –ø–æ 110–∫–≤:</b> ${power} –ú–í—Ç<br>
                                `);
                            marker.options.power = power;
                            return marker;
                        }
                    });
                    clusterGroup110.addLayer(layerPotuznist110);      

            var geojsonUrlpidstobl = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/obl-pidstancii-all-zahid.geojson';
            fetch(geojsonUrlpidstobl)
                .then(response => response.json())
                .then(projektyGeojsonData => {
                    // –§—É–Ω–∫—Ü—ñ—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —á–∏ —î —Ö–æ—á–∞ –± –æ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è voltage >= 35000
                    function voltageFilter(feature) {
                        if (!feature.properties.voltage) return false; // –Ø–∫—â–æ –ø–æ–ª–µ –≤—ñ–¥—Å—É—Ç–Ω—î
                        let voltages = feature.properties.voltage.split(";").map(v => parseInt(v.trim())); // –†–æ–∑–¥—ñ–ª—è—î–º–æ —Ç–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ —É —á–∏—Å–ª–∞
                        return voltages.some(v => v >= 35000); // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î —Ö–æ—á–∞ –± –æ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è ‚â• 35000
                    }
                    // –§—ñ–ª—å—Ç—Ä—É—î–º–æ GeoJSON
                    let filteredData = {
                        type: "FeatureCollection",
                        features: projektyGeojsonData.features.filter(voltageFilter)
                    };
                    // –°—Ç–≤–æ—Ä—é—î–º–æ —à–∞—Ä –∑ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏
                    oblpidstLayer = L.geoJSON(filteredData, {
                        pointToLayer: function(feature, latlng) {
                            return L.circleMarker(latlng, {
                                radius: 4,
                                fillColor: "blue",
                                color: "black",
                                weight: 1,
                                opacity: 1,
                                fillOpacity: 1
                            });
                        },
                        onEachFeature: function(feature, layer) {
                            layer.bindPopup(`
                                <b>–ù–∞–∑–≤–∞:</b> ${feature.properties.full_name || feature.properties.name || 'Unknown'}<br>
                                <b>–ù–∞–ø—Ä—É–≥–∞:</b> ${feature.properties.voltage || 'Unknown'}<br>
                                <b>–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å:</b> ${feature.properties.rating || 'Unknown'}<br>
                                <b>–û–ø–µ—Ä–∞—Ç–æ—Ä:</b> ${feature.properties.operator || 'Unknown'}
                            `);
                        }
                    });         
                                                                        


    //----------------------------------------------------------------–µ–∫–æ–ª–æ–≥—ñ—è 700–º –∞–µ—Ä–æ–¥—Ä–æ–º–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è-----------------------------------------------------------------



            var opacity700 = 0.3
            var color700 = '#548be3'
            var geojsonUrlLvivbuf = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/merged_buffers_lviv.geojson';
            fetch(geojsonUrlLvivbuf)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    buflvivLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: color700, // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: opacity700
                        },
                        interactive: false,
                        zIndex: -999  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });
            var geojsonUrlvolin = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/merged_buffers_volin.geojson';
            fetch(geojsonUrlvolin)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    volinLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: color700, // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: opacity700
                        },
                        interactive: false,
                        zIndex: -999  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });
            var geojsonUrlzakarpatsk = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/merged_buffers_zakarpatsk.geojson';
            fetch(geojsonUrlzakarpatsk)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    zakarpatskLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: color700, // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: opacity700
                        },
                        interactive: false,
                        zIndex: -999  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });
            var geojsonUrlrivne = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/merged_buffers_rivne.geojson';
            fetch(geojsonUrlrivne)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    rivneLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: color700, // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: opacity700
                        },
                        interactive: false,
                        zIndex: -999  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });
            var geojsonUrlternopil = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/merged_buffers_ternopil.geojson';
            fetch(geojsonUrlternopil)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    ternopilLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: color700, // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: opacity700
                        },
                        interactive: false,
                        zIndex: -999  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });
            var geojsonUrlfrankivsk = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/merged_buffers_frankivsk.geojson';
            fetch(geojsonUrlfrankivsk)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    frankivskLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: color700, // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: opacity700
                        },
                        interactive: false,
                        zIndex: -999  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });
            var geojsonUrlchernivci = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/merged_buffers_chernivci.geojson';
            fetch(geojsonUrlchernivci)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    chernivciLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: color700, // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: opacity700
                        },
                        interactive: false,
                        zIndex: -999  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });
            var geojsonUrlhmelnitsk = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/merged_buffers_hmelnitsk.geojson';
            fetch(geojsonUrlhmelnitsk)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    hmelnitskLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: color700, // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: opacity700
                        },
                        interactive: false,
                        zIndex: -999  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });
            var geojsonUrlaerodromi = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/aerodromi_buffers.geojson';
            fetch(geojsonUrlaerodromi)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    aerodromiLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: '#cf4b44', // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 2, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: 0
                        },
                        interactive: false,
                        zIndex: -999  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });
            var geojsonUrlaerodromi16 = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/aerodromi_buffers_16.geojson';
            fetch(geojsonUrlaerodromi16)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    aerodromiLayer16 = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: '#cf4b44', // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: 0.3
                        },
                        interactive: false,
                        zIndex: -998  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });

            var geojsonUrlourairports = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/ourairports.geojson';
                fetch(geojsonUrlourairports)
                    .then(response => response.json())
                    .then(projektyGeojsonData => {
                        ourairports = L.geoJSON(projektyGeojsonData, {
                            pointToLayer: function(feature, latlng) {
                                var icon;
                                // –í–∏–±—ñ—Ä —ñ–∫–æ–Ω–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–∏–ø—É
                                if (feature.properties.type === 'large_airport') {
                                    icon = L.divIcon({
                                        html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#EA3323"><path d="m397-115-99-184-184-99 71-70 145 25 102-102-317-135 84-86 385 68 124-124q23-23 57-23t57 23q23 23 23 56.5T822-709L697-584l68 384-85 85-136-317-102 102 26 144-71 71Z"/></svg>`,
                                        className: 'no-background-icon'
                                    });
                                } else if (feature.properties.type === 'medium_airport') {
                                    icon = L.divIcon({
                                        html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#F19E39"><path d="m397-115-99-184-184-99 71-70 145 25 102-102-317-135 84-86 385 68 124-124q23-23 57-23t57 23q23 23 23 56.5T822-709L697-584l68 384-85 85-136-317-102 102 26 144-71 71Z"/></svg>`,
                                        className: 'no-background-icon'
                                    });
                                } else if (feature.properties.type === 'small_airport') {
                                    icon = L.divIcon({
                                        html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#8B7DBE"><path d="m397-115-99-184-184-99 71-70 145 25 102-102-317-135 84-86 385 68 124-124q23-23 57-23t57 23q23 23 23 56.5T822-709L697-584l68 384-85 85-136-317-102 102 26 144-71 71Z"/></svg>`,
                                        className: 'no-background-icon'
                                    });
                                } else if (feature.properties.type === 'closed') {
                                    icon = L.divIcon({
                                        html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#8B7DBE"><path d="m880-280-141-57-339-337v-126q0-33 23.5-56.5T480-880q33 0 56.5 23.5T560-800v176l320 224v120ZM480-140 280-80v-100l120-84v-144L80-280v-120l216-152L56-792l56-56 736 736-56 56-232-232v24l120 84v100l-200-60Z"/></svg>`,
                                        className: 'no-background-icon'
                                    });
                                } else if (feature.properties.type === 'heliport') {
                                    icon = L.divIcon({
                                        html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#8B7DBE"><path d="M280-280v-400h80v160h240v-160h80v400h-80v-160H360v160h-80Z"/></svg>`,
                                        className: 'no-background-icon'
                                    });
                                }
                                // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ç–æ—á–∫—É –∑ –ø–æ—Ç—Ä—ñ–±–Ω–æ—é —ñ–∫–æ–Ω–∫–æ—é
                                return L.marker(latlng, { icon: icon });
                            },
                            onEachFeature: function(feature, layer) {
                                layer.bindPopup(`
                                    <b>–ù–∞–∑–≤–∞:</b> ${feature.properties.name || 'Unknown'}<br>
                                    <b>–¢–∏–ø:</b> ${feature.properties.type || 'Unknown'}<br>
                                    ${feature.properties.wikipedia ? `<a href='${feature.properties.wikipedia}' target="_blank">Link</a>` : ''}
                                `);
                            }
                        });
                    });

                    var geojsonUrlaeroruh = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/aeroruh.geojson';
                    var createPolygonLayerAeroruh = (geojsonData, category) => {
                        // –§—ñ–ª—å—Ç—Ä—É—î–º–æ –¥–∞–Ω—ñ –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é "–ö–æ–º–µ–Ω—Ç"
                        var filteredFeatures = geojsonData.features.filter(feature => 
                            feature.properties["–ö–æ–º–µ–Ω—Ç"] && feature.properties["–ö–æ–º–µ–Ω—Ç"].includes(category)
                        );

                        var filteredGeojson = {
                            type: "FeatureCollection",
                            features: filteredFeatures
                        };

                        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —à–∞—Ä—É –∑ –ª—ñ–Ω—ñ—è–º–∏, —â–æ –≤–∏–≥–ª—è–¥–∞—é—Ç—å —è–∫ —à—Ç—Ä–∏—Ö—É–≤–∞–Ω–Ω—è
                        return L.geoJSON(filteredGeojson, {
                            style: function(feature) {
                                return { 
                                    color: category === "–î–∏—Å–ø–µ—á–µ—Ä—Å—å–∫—ñ –∑–æ–Ω–∏" ? '#736734' : 
                                        category === "–¢—Ä–µ–Ω—É–≤–∞–ª—å–Ω—ñ –∑–æ–Ω–∏" ? '#31bdb8' : 
                                        category === "–ó–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ, –Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ –∑–æ–Ω–∏" ? '#bf73bd' : 
                                        category === "–í—ñ–π—Å—å–∫–æ–≤—ñ –¥–∏—Å–ø–µ—á–µ—Ä—Å—å–∫—ñ –∑–æ–Ω–∏" ? '#09052b' : 
                                        category === "–¢–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –¥–∏—Å–ø–µ—á–µ—Ä—Å—å–∫—ñ –∑–æ–Ω–∏" ? '#2e130d' : 'gray', 
                                    weight: 2,  // –¢–æ–≤—â–∏–Ω–∞ –∫–æ–Ω—Ç—É—Ä—É
                                    fillOpacity: 0.3,  // –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è
                                    dashArray: '5,5'  // –®—Ç—Ä–∏—Ö–æ–≤–∞–Ω—ñ –ª—ñ–Ω—ñ—ó
                                };
                            },
                            onEachFeature: function(feature, layer) {
                                layer.bindPopup(`
                                    <b>–ö–æ–º–µ–Ω—Ç–∞—Ä:</b> ${feature.properties["–ö–æ–º–µ–Ω—Ç"] || 'Unknown'}
                                `);
                            }
                        });
                    };

    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON —ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —à–∞—Ä—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
    fetch(geojsonUrlaeroruh)
        .then(response => response.json())
        .then(geojsonData => {
            layerDispatcherZones = createPolygonLayerAeroruh(geojsonData, "–î–∏—Å–ø–µ—á–µ—Ä—Å—å–∫—ñ –∑–æ–Ω–∏");
            layerTrainingZones = createPolygonLayerAeroruh(geojsonData, "–¢—Ä–µ–Ω—É–≤–∞–ª—å–Ω—ñ –∑–æ–Ω–∏");
            layerRestrictedZones = createPolygonLayerAeroruh(geojsonData, "–ó–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ, –Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ –∑–æ–Ω–∏");
            layerMilitaryZones = createPolygonLayerAeroruh(geojsonData, "–í—ñ–π—Å—å–∫–æ–≤—ñ –¥–∏—Å–ø–µ—á–µ—Ä—Å—å–∫—ñ –∑–æ–Ω–∏");
            layerTerminalZones = createPolygonLayerAeroruh(geojsonData, "–¢–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –¥–∏—Å–ø–µ—á–µ—Ä—Å—å–∫—ñ –∑–æ–Ω–∏");
        

                                                                                            //map.getPane('borderPane').style.zIndex = 400;
            var waterPolyLayer = L.tileLayer('https://cdn.kadastr.live/tiles/raster/styles/water_poly_ramsar/{z}/{x}/{y}.png');
            var dzkPzfLayer = L.tileLayer('https://cdn.kadastr.live/tiles/raster/styles/dzk__pzf/{z}/{x}/{y}.png');
            var cadastrLayer = L.tileLayer('https://cdn.kadastr.live/tiles/raster/styles/parcels/{z}/{x}/{y}.png');
            var oblastLayer = L.tileLayer('https://cdn.kadastr.live/tiles/raster/styles/dzk__atu_oblast/{z}/{x}/{y}.png');
            var raionLayer = L.tileLayer('https://cdn.kadastr.live/tiles/raster/styles/dzk__atu_rayon/{z}/{x}/{y}.png');
            var otgLayer = L.tileLayer('https://cdn.kadastr.live/tiles/raster/styles/dzk__atu_terhromad__line/{z}/{x}/{y}.png');

            var geojsonUrlemerald = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/amerald_zahid.geojson';
            fetch(geojsonUrlemerald)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    emeraldLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: '#3b8f51', // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: 0.3
                        },
                        interactive: false,
                        zIndex: -999  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ zIndex, —â–æ–± —à–∞—Ä –±—É–≤ –ø—ñ–¥ —ñ–Ω—à–∏–º–∏
                    });

                    

    //----------------------------------------------------------------tifs-----------------------------------------------------------------


            var geotiffUrlw = "https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/UKR_wind-speed_100m-.tif";  
            var geotiffUrlNew = "https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/virobitka.tif";  

            var layerWind, layerSolar;
            var windPopupActive = false, solarPopupActive = false;
            var windLegend = null, solarLegend = null;

            // ========================= –õ–ï–ì–ï–ù–î–ê –í–Ü–¢–†–£ =========================
            var WindLegendControl = L.Control.extend({
            options: { position: 'bottomleft' },
            onAdd: function () {
                var div = L.DomUtil.create('div', 'info legend wind-legend');
                div.innerHTML = `
                <b>–®–≤–∏–¥–∫—ñ—Å—Ç—å –≤—ñ—Ç—Ä—É</b><br>
                <i style="background: #f4fc03"></i> 7 - 7.3<br>
                <i style="background: #fcce03"></i> 7.31 - 7.6<br>
                <i style="background: #fc9003"></i> 7.61 - 7.9<br>
                <i style="background: #fc4e03"></i> 7.91 - 8.2<br>
                <i style="background: #d60606"></i> 8.21 - 8.5<br>
                <i style="background: #6e0000"></i> 8.51+<br>
                `;
                div.style.background = 'white';
                div.style.padding = '10px';
                div.style.border = '1px solid #333';
                div.style.borderRadius = '5px';
                //div.style.zIndex = "100000";
                setTimeout(() => div.classList.add('show'), 50);
                return div;
            }
            });
            // ========================= –õ–ï–ì–ï–ù–î–ê –≤–∏—Ä–æ–±—ñ—Ç–∫–∏ =========================
            var SolarLegendControl = L.Control.extend({
            options: { position: 'bottomleft' },
            onAdd: function () {
                var div = L.DomUtil.create('div', 'info legend wind-legend');
                div.innerHTML = `
                <b>–í–∏—Ä–æ–±—ñ—Ç–∫–∞</b><br>
                <i style="background: #f4fc03"></i> 3000 - 3200<br>
                <i style="background: #fcce03"></i> 3200 - 3400<br>
                <i style="background: #fc9003"></i> 3400 - 3600<br>
                <i style="background: #fc4e03"></i> 3600 - 3800<br>
                <i style="background: #d60606"></i> 3800+
                `;
                div.style.background = 'white';
                div.style.padding = '10px';
                div.style.border = '1px solid #333';
                div.style.borderRadius = '5px';
                //div.style.zIndex = "100000";
                setTimeout(() => div.classList.add('show'), 50);
                return div;
            }
            });

            // ========================= –î–û–î–ê–Ñ–ú–û –ì–ï–û–¢–Ü–§–§ =========================
            function addGeoTiffLayer(url, colorScale, callback) {
            fetch(url)
                .then(res => res.arrayBuffer())
                .then(arrayBuffer => {
                parseGeoraster(arrayBuffer).then(georaster => {
                    var layer = new GeoRasterLayer({
                    georaster: georaster,
                    opacity: 0.5,
                    pixelValuesToColorFn: colorScale,
                    zIndex: 20,
                    resolution: 128
                    });
                
                    callback(layer, georaster);
                });
                });
            }

            // ========================= –ü–û–ü–ê–ü–ò =========================
            function createPopupHandler(georaster, isActive) {
            return function (event) {
                if (!isActive()) return;

                var lat = event.latlng.lat;
                var lng = event.latlng.lng;
                var value = geoblaze.identify(georaster, [lng, lat]);

                if (value !== undefined) {
                L.popup()
                    .setLatLng([lat, lng])
                    .setContent(Number(value).toFixed(5))
                    .openOn(map);
                }
            };
            }

            // ========================= –õ–ï–ì–ï–ù–î–ê =========================
            function toggleLegend(legendControl, legendInstance) {
            if (legendInstance) {
                map.removeControl(legendInstance);
                return null;
            } else {
                let newLegend = new legendControl();
                newLegend.addTo(map);
                return newLegend;
            }
            }

            // ========================= –ö–ù–û–ü–ö–ò =========================
            function createLayerControlButton(icon, toggleLayerCallback) {
            var ControlButton = L.Control.extend({
                onAdd: function () {
                var button = L.DomUtil.create('button');
                button.innerHTML = icon;
                button.style.backgroundColor = '#ffffff';
                button.style.border = '1px solid #333';
                button.style.padding = '5px';
                button.style.fontSize = '25px';
                button.style.cursor = 'pointer';
                button.style.borderRadius = '5px';
                
                L.DomEvent.on(button, 'click', function (e) {
                    L.DomEvent.stopPropagation(e);
                    toggleLayerCallback();
                });
            
                return button;
                },
                position: 'topleft'
            });
            map.addControl(new ControlButton());
            }

            // ========================= –î–û–î–ê–Ñ–ú–û –®–ê–† –í–Ü–¢–†–£ =========================
            addGeoTiffLayer(
            geotiffUrlw,
                v => (isNaN(v) || v < 7) ? null : 
                    v <= 7.3 ? '#f4fc03' : 
                    v <= 7.6 ? '#fcce03' : 
                    v <= 7.9 ? '#fc9003' : 
                    v <= 8.2 ? '#fc4e03' : 
                    v <= 8.5 ? '#d60606' : '#6e0000',
            function (layer, georaster) {
                layerWind = layer;
                map.on("click", createPopupHandler(georaster, () => windPopupActive));
            
                createLayerControlButton("üå™Ô∏è", function () {
                windPopupActive = !windPopupActive;
                if (map.hasLayer(layerWind)) {
                    map.removeLayer(layerWind);
                    windLegend = toggleLegend(WindLegendControl, windLegend);
                } else {
                    map.addLayer(layerWind);
                    windLegend = toggleLegend(WindLegendControl, windLegend);
                }
                });
            }
            );
        
            // ========================= –î–û–î–ê–Ñ–ú–û –®–ê–† –≤–∏—Ä–æ–±—ñ—Ç–∫–∏ =========================
            addGeoTiffLayer(
            geotiffUrlNew,
            v => v < 2999 ? null : 
                v <= 3200 ? '#f4fc03' : 
                v <= 3400 ? '#fcce03' : 
                v <= 3600 ? '#fc9003' : 
                v <= 3800 ? '#fc4e03' : '#fc4e03',
            function (layer, georaster) {
                layerSolar = layer;
                map.on("click", createPopupHandler(georaster, () => solarPopupActive));
            
                createLayerControlButton("‚ö°", function () {
                solarPopupActive = !solarPopupActive;
                if (map.hasLayer(layerSolar)) {
                    map.removeLayer(layerSolar);
                    solarLegend = toggleLegend(SolarLegendControl, solarLegend);
                } else {
                    map.addLayer(layerSolar);
                    solarLegend = toggleLegend(SolarLegendControl, solarLegend);
                }
                });
            }
            );
        
    //---------------------------------------------------------------------------------------------------------------------------------




            var geojsonUrsmall_14_01 = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/14-01-zahid-small.geojson';
            fetch(geojsonUrsmall_14_01)
                .then(response => response.json())
                .then(projektyGeojsonData => {
                    small_14_01 = L.geoJSON(projektyGeojsonData, {
                        style: function(feature) {
                            return {
                                fillColor: "purple", // –ö–æ–ª—ñ—Ä –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø–æ–ª—ñ–≥–æ–Ω—É
                                color: "black", // –ö–æ–ª—ñ—Ä –æ–±–≤–µ–¥–µ–Ω–Ω—è
                                weight: 3, // –¢–æ–≤—â–∏–Ω–∞ –æ–±–≤–µ–¥–µ–Ω–Ω—è
                                opacity: 1, // –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –æ–±–≤–µ–¥–µ–Ω–Ω—è
                                fillOpacity: 0.6 // –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è
                            };
                        },
                        onEachFeature: function(feature, layer) {
                            layer.bindPopup(`
                                <b>–ù–æ–º–µ—Ä:</b> ${feature.properties["landuse.cadnum"] || 'Unknown'}<br>
                                <b>–ü–ª–æ—â–∞:</b> ${feature.properties.area || 'Unknown'}<br>
                                <b>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:</b> ${feature.properties.use || 'Unknown'}<br>
                                <b>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</b> ${feature.properties.category || 'Unknown'}<br>
                                <b>–í–ª–∞—Å–Ω—ñ—Å—Ç—å:</b> ${feature.properties.ownership || 'ownership'}<br>
                            `);
                        }
                    });

            var geojsonKonkurentyzahidvitr = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/diluankikonkurenti.geojson';
            fetch(geojsonKonkurentyzahidvitr)
                .then(response => response.json())
                .then(projektyGeojsonData => {
                    vitr_zahid = L.geoJSON(projektyGeojsonData, {
                        style: function(feature) {
                            return {
                                fillColor: "blue", // –ö–æ–ª—ñ—Ä –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø–æ–ª—ñ–≥–æ–Ω—É
                                color: "black", // –ö–æ–ª—ñ—Ä –æ–±–≤–µ–¥–µ–Ω–Ω—è
                                weight: 3, // –¢–æ–≤—â–∏–Ω–∞ –æ–±–≤–µ–¥–µ–Ω–Ω—è
                                opacity: 1, // –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –æ–±–≤–µ–¥–µ–Ω–Ω—è
                                fillOpacity: 0.6 // –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è
                            };
                        },
                        onEachFeature: function(feature, layer) {
                            layer.bindPopup(`
                                <b>–ù–æ–º–µ—Ä:</b> ${feature.properties.cadnum || feature.properties["landuse.cadnum"] || 'Unknown'}<br>
                                <b>LN:</b> ${feature.properties.LN || 'Unknown'}<br>
                            `);
                        }
                    });
            var geojsonUrlpointsveuKonkurenti = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/veuKonkurenti.geojson';
            fetch(geojsonUrlpointsveuKonkurenti)
                .then(response => response.json())
                .then(projektyGeojsonData => {
                    vitryaki_veuKonkurenti = L.geoJSON(projektyGeojsonData, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#a80808"><path d="M440-520h80v-200h-80v200Zm40 160q17 0 28.5-11.5T520-400q0-17-11.5-28.5T480-440q-17 0-28.5 11.5T440-400q0 17 11.5 28.5T480-360Zm0 174q122-112 181-203.5T720-552q0-109-69.5-178.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186Zm0 106Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Zm0-480Z"/></svg>',
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            return L.marker(latlng, { icon: icon });
                        }
                    });

            var geojsonUrlkonkurenty16 = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/konkurenty_buffers_16.geojson';
            fetch(geojsonUrlkonkurenty16)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    console.log(geojsonUrlkonkurenty16)
                    konkurentyLayer16 = L.geoJSON(borderGeojsonData, {
                        style: function(feature) {
                        return {
                            color: 'purple', // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 1, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: 0.5
                        };
                        },
                        onEachFeature: function(feature, layer) {
                            layer.bindPopup(`
                                <b>–ù–∞–∑–≤–∞:</b> ${feature.properties.name || 'Unknown'}<br>
                                <b>–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å:</b> ${feature.properties.height || 'Unknown'} –ú–í—Ç<br>
                            `);
                        }                   
                    });
                

            var geojsonUrlAnimal = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/animalss.geojson';
            fetch(geojsonUrlAnimal)
                .then(response => response.json())
                .then(projektyGeojsonData => {
                    // –§—ñ–ª—å—Ç—Ä—É—î–º–æ –¥–∞–Ω—ñ: —Ç—ñ–ª—å–∫–∏ –¥–µ –∫–ª–∞—Å = 'Aves' –∞–±–æ —Ä—è–¥ = 'Chiroptera'
                    let filteredData = {
                        type: "FeatureCollection",
                        features: projektyGeojsonData.features.filter(feature => 
                            feature.properties.class === "Aves" || feature.properties.family === "Vespertilionidae" || feature.properties.family === "Rhinolophidae"
                        )
                    };
                    // –°—Ç–≤–æ—Ä—é—î–º–æ —à–∞—Ä –∑ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏
                    animalLayer = L.geoJSON(filteredData, {
                        pointToLayer: function(feature, latlng) {
                            return L.circleMarker(latlng, {
                                radius: 4, 
                                fillColor: "red",
                                color: "black",
                                weight: 1,
                                opacity: 1,
                                fillOpacity: 1
                            });
                        },
                        onEachFeature: function(feature, layer) {
                            layer.bindPopup(`
                                <b>–ù–∞–∑–≤–∞:</b> ${feature.properties.scientificName || 'Unknown'}<br>
                                <b>–ö–ª–∞—Å:</b> ${feature.properties.class || 'Unknown'}<br>
                                <b>–†—è–¥:</b> ${feature.properties.order || 'Unknown'}<br>
                                <b>–î–∞—Ç–∞:</b> ${feature.properties.eventDate || 'Unknown'}
                            `);
                        }
                    })

            


    // --------------------------------- points to mark –Ω–∞—à—ñ –ª–æ–∫–∞—Ü—ñ—ó ------------------------------------
    var circles = {};
    function toggleCircles(latlng) {
        var key = latlng.toString(); // –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–ª—é—á –¥–ª—è —Ç–æ—á–∫–∏

        if (circles[key]) {
            // –Ø–∫—â–æ –∫–æ–ª–∞ –≤–∂–µ —î ‚Äî –≤–∏–¥–∞–ª—è—î–º–æ
            circles[key].forEach(circle => map.removeLayer(circle));
            delete circles[key];
        } else {
            // –î–æ–¥–∞—î–º–æ –Ω–æ–≤—ñ –∫–æ–ª–∞ (–ù–ï—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ)
            var circle700 = L.circle(latlng, { radius: 700, color: '#02fae1', fillOpacity: 0.1, interactive: false }).addTo(map);
            var circle150 = L.circle(latlng, { radius: 150, color: '#02fae1', fillOpacity: 0.1, interactive: false }).addTo(map);
            circles[key] = [circle700, circle150];
        }
    }

    // --------------------------------- –ö–æ–≤–µ–ª—å ------------------------------------


            vitryaki_kovel17 = L.geoJSON(dataKovel17, {
                pointToLayer: function(feature, latlng) {
                    var icon = L.divIcon({
                        html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ff00c8"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                        className: 'no-background-icon',
                        iconSize: [24, 24],
                        iconAnchor: [12, 12]
                    });

                    var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })
                    
                    vitryaki_kovel25 = L.geoJSON(dataKovel25, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#020dd6"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                            marker.on('click', function() {
                                toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                            });

                            return marker;
                        }
                    })

    //------------------------------------------------radiviliv----------------------------------------------

            
                    vitryaki_radiviliv17 = L.geoJSON(dataRadiviliv17, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ff00c8"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })
            
                    vitryaki_radiviliv25 = L.geoJSON(dataRadiviliv25, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#020dd6"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })
            //------------------------------------------------lutsk----------------------------------------------

            
                    vitryaki_lutsk17 = L.geoJSON(dataLutsk17, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ff00c8"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })
            
                    vitryaki_lutsk25 = L.geoJSON(dataLutsk25, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#020dd6"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })


                    //------------------------------------------------ternopil----------------------------------------------

            
                    vitryaki_ternopil17 = L.geoJSON(dataTernopil17, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ff00c8"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })
            
                    vitryaki_ternopil25 = L.geoJSON(dataTernopil25, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#020dd6"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })
            //------------------------------------------------grabiv----------------------------------------------

            
                    vitryaki_grabiv17 = L.geoJSON(dataGrabiv17, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ff00c8"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })
            
                    vitryaki_grabiv25 = L.geoJSON(dataGrabiv25, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#020dd6"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })




                            //------------------------------------------------Berdihiv----------------------------------------------

            

                    var geojsonUrlpointsBerdihiv8v2 = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/Berdihiv/8 –í–ï–£-108–º 108024 MWh.geojson';
            
                    vitryaki_Berdihiv8v2 = L.geoJSON(dataBerdihiv8veu108m, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#020dd6"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })


                var geojsonUrlpointsBerdihiv8v1 = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/Berdihiv/8-–í–ï–£ –Ω–∞ –Ω–æ–≤–∏—Ö –ª–æ–∫–∞—Ü—ñ—è—Ö 114807MWh.geojson';
            
                    vitryaki_Berdihiv8v1 = L.geoJSON(dataBerdihiv8veuNEW, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ff00c8"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })


                var geojsonUrlpointsBerdihiv10 = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/Berdihiv/berdihiv10veu 119340 MWh.geojson';
            
                    vitryaki_Berdihiv10 = L.geoJSON(dataBerdihiv10veu119340, {
                        pointToLayer: function(feature, latlng) {
                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#fc6203"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                                iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                                iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                            });
                            var marker = L.marker(latlng, { icon: icon });

                        marker.on('click', function() {
                            toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                        });

                        return marker;
                    }
                })

                var geojsonUrlpointsBerdihiv10color = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/Berdihiv/10veu127966MWh.geojson';
                    vitryaki_Berdihiv10color = L.geoJSON(dataBerdihiv10veu127966, {
                        pointToLayer: function(feature, latlng) {
                            // –í–∏–∑–Ω–∞—á–∞—î–º–æ –∫–æ–ª—ñ—Ä –Ω–∞ –æ—Å–Ω–æ–≤—ñ id
                            var id = feature.properties.id;
                            var name = feature.properties.Name;
                            var fillColor = "#fc6203"; // –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (–æ—Ä–∞–Ω–∂–µ–≤–∏–π)

                            if (id === 1) {
                                fillColor = "#30de04";
                            } else if (id === 2) {
                                fillColor = "orange";
                            } else if (id === 3) {
                                fillColor = "red";
                            }

                            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                            var icon = L.divIcon({
                                html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="${fillColor}"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                                className: 'no-background-icon',
                                iconSize: [24, 24],
                                iconAnchor: [12, 12]
                            });

                            var marker = L.marker(latlng, { icon: icon });

                            marker.on('click', function() {
                                toggleCircles(latlng);
                            });
                        /* marker.bindTooltip(`
                                    ${name}<br>
                                `, {
                                    permanent: true,
                                    direction: 'top',
                                    className: 'custom-tooltip110',
                                    offset: [0, -2]
                                });*/

                            return marker;
                        }
                    });
                





                
            var geojsonUrlbuffer40kmpidst = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/40km-radius.geojson';
            fetch(geojsonUrlbuffer40kmpidst)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    buffer40pidstLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: '#2d0396', // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 2, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: 0,
                            zIndex: 100, // –ó–∞–¥–∞—î–º–æ z-index
                            dashArray: '5, 10'
                        },
                        interactive: false
                    });
            var geojsonUrlbuffer25kmpidst = 'https://mark-000.github.io/pl-power-vis-map.github.io/UAmap/25km-radius.geojson';
            fetch(geojsonUrlbuffer25kmpidst)
                .then(response => response.json())
                .then(borderGeojsonData => {
                    buffer25pidstLayer = L.geoJSON(borderGeojsonData, {
                        style: {
                            color: 'orange', // –ö–æ–ª—ñ—Ä —à–∞—Ä—É
                            weight: 2, // –¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π
                            fillOpacity: 0,
                            zIndex: 101, // –ó–∞–¥–∞—î–º–æ z-index
                            dashArray: '5, 10'
                        },
                        interactive: false
                    });




    //----------------------------------------------------------------shari –∫–æ–Ω—Ç—Ä–æ–ª—å —à–∞—Ä—ñ–≤-----------------------------------------------------------------
                    // –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ—Ä–µ–≤–∞ —à–∞—Ä—ñ–≤
            var baseTree = {
                label: "<b>–ë–∞–∑–æ–≤—ñ –∫–∞—Ä—Ç–∏</b>",
                children: [
                    { label: "OpenStreetMap", layer: osmLayer, radioGroup: "basemap" },
                    { label: "White Map", layer: WhiteLayer, radioGroup: "basemap" },
                    { label: "Google Map", layer: googleLayer, radioGroup: "basemap" },
                    { label: "Topo Map", layer: topoLayer, radioGroup: "basemap" },
                ]
            };
            // –î–µ—Ä–µ–≤–æ —à–∞—Ä—ñ–≤
            var overlaysTree = {
                label: "<b>–®–∞—Ä–∏</b>",
                selectAllCheckbox: true,  // –î–æ–¥–∞—î —á–µ–∫–±–æ–∫—Å –¥–ª—è –≤–∏–±–æ—Ä—É –≤—Å—ñ—Ö —à–∞—Ä—ñ–≤
                children: [
                    { 
                        label: "<b>–ï–ª–µ–∫—Ç—Ä–æ–º–µ—Ä–µ–∂—ñ</b>", 
                        children: [
                            { label: "–ù–ï–ö –ø—ñ–¥—Å—Ç–∞–Ω—Ü—ñ—ó", layer: NEKLayer },
                            { label: "–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è", layer: geoJsonClusterGroup },
                            { label: "–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –ø–æ 35–∫–í", layer: layerPotuznist35 },
                            { label: "–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –ø–æ 110–∫–í", layer: clusterGroup110 },
                            { label: "–ï–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü—ñ—ó", layer: PUALayer },
                            { label: "–û–±–ª –ø—ñ–¥—Å—Ç–∞–Ω—Ü—ñ—ó", layer: oblpidstLayer },
                            { label: "–õ—ñ–Ω—ñ—ó 220+", layer: reconsLayer },
                            { label: "–õ—ñ–Ω—ñ—ó 110", layer: Layer110 }
                        ]
                    },
                    { 
                        label: "<b>–ü—Ä–æ–µ–∫—Ç–∏</b>", 
                        collapsed: true,
                        children: [
                            { label: "–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–∏", layer: konkurentyLayer16 },
                            { label: "–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–∏ –¥—ñ–ª—è–Ω–∫–∏", layer: vitr_zahid },
                            { label: "–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–∏ –í–ï–£", layer: vitryaki_veuKonkurenti },
                            { label: "14.01 –º–∞–ª–µ–Ω—å–∫—ñ", layer: small_14_01 },
                        // { label: "50–∫–º –¥–ª—è –ø—Ä–æ–µ–∫—Ç—ñ–≤", layer: buffer50pidstLayer }buffer40pidstLayer
                        ]
                    },
                    { 
                        label: "<b>–û—Ü—ñ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç—ñ–≤</b>", 
                        collapsed: true,
                        children: [
                        {
                                label: "<b>–ö–æ–≤–µ–ª—å</b>", 
                                collapsed: true,
                                children: [
                                { label: "17 –í–ï–£ 329957 MWh", layer: vitryaki_kovel17 },
                                { label: "25 –í–ï–£ 473797 MWh", layer: vitryaki_kovel25 },
                                ]
                            },
                            {
                                label: "<b>–õ—É—Ü—å–∫</b>", 
                                collapsed: true,
                                children: [
                                { label: "17 –í–ï–£ v3 323772 MWh", layer: vitryaki_lutsk17 },
                                { label: "25 –í–ï–£ v3 470845 MWh", layer: vitryaki_lutsk25 },
                                ]
                            },
                            {
                                label: "<b>–†–∞–¥–∏–≤–∏–ª—ñ–≤</b>", 
                                collapsed: true,
                                children: [
                                { label: "17 –í–ï–£ 323451 MWh", layer: vitryaki_radiviliv17 },
                                { label: "25 –í–ï–£ 467013 MWh", layer: vitryaki_radiviliv25 },
                                ]
                            },
                            {
                                label: "<b>–¢–µ—Ä–Ω–æ–ø—ñ–ª—å</b>", 
                                collapsed: true,
                                children: [
                                { label: "17 –í–ï–£ 339436 MWh", layer: vitryaki_ternopil17 },
                                { label: "25 –í–ï–£ 488633 MWh", layer: vitryaki_ternopil25 },
                                ]
                            },
                            {
                                label: "<b>–ì—Ä–∞–±—ñ–≤</b>", 
                                collapsed: true,
                                children: [
                                { label: "17 –í–ï–£ 332909 MWh", layer: vitryaki_grabiv17 },
                                { label: "25 –í–ï–£ 481663 MWh", layer: vitryaki_grabiv25 },
                                ]
                            },
                            {
                                label: "<b>–ë–µ—Ä–¥–∏—Ö—ñ–≤</b>", 
                                collapsed: true,
                                children: [
                                { label: "8 –í–ï–£ 108–º 114514 MWh –Ω–æ–≤—ñ", layer: vitryaki_Berdihiv8v1 },
                                { label: "8 –í–ï–£ 108–º 108024 MWh –≤—ñ–¥–≤–µ–¥–µ–Ω—ñ", layer: vitryaki_Berdihiv8v2 },
                                { label: "10 –í–ï–£ 119340 MWh", layer: vitryaki_Berdihiv10 },
                                { label: "10 –í–ï–£ 127966 MWh", layer: vitryaki_Berdihiv10color },
                                ]
                            },
                            { label: "25–∫–º –¥–ª—è –ø—Ä–æ–µ–∫—Ç—ñ–≤", layer: buffer25pidstLayer },
                            { label: "40–∫–º –¥–ª—è –ø—Ä–æ–µ–∫—Ç—ñ–≤", layer: buffer40pidstLayer }
                        ]
                    },
                    { 
                        label: "<b>–û–±–º–µ–∂–µ–Ω–Ω—è</b>",
                        collapsed: true, 
                        children: [
                            {
                                label: "<b>–ê–µ—Ä–æ—Ä—É—Ö</b>", 
                                collapsed: true,
                                children: [
                                    { label: "–ê–µ—Ä–æ–¥—Ä–æ–º–∏", layer: ourairports },
                                    { label: "–î–∏—Å–ø–µ—á–µ—Ä—Å—å–∫—ñ –∑–æ–Ω–∏", layer: layerDispatcherZones },
                                    { label: "–¢—Ä–µ–Ω—É–≤–∞–ª—å–Ω—ñ –∑–æ–Ω–∏", layer: layerTrainingZones },
                                    { label: "–ó–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ, –Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ –∑–æ–Ω–∏", layer: layerRestrictedZones },
                                    { label: "–í—ñ–π—Å—å–∫–æ–≤—ñ –¥–∏—Å–ø–µ—á–µ—Ä—Å—å–∫—ñ –∑–æ–Ω–∏", layer: layerMilitaryZones },
                                    { label: "–¢–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –¥–∏—Å–ø–µ—á–µ—Ä—Å—å–∫—ñ –∑–æ–Ω–∏", layer: layerTerminalZones },
                                    { label: "–ü—Ä–∏–∞–µ—Ä–æ–¥—Ä–æ–º–Ω–∞ 50–∫–º", layer: aerodromiLayer },
                                    { label: "–ü—Ä–∏–∞–µ—Ä–æ–¥—Ä–æ–º–Ω–∞ 16–∫–º", layer: aerodromiLayer16 },
                                ]
                            },
                            { label: "–õ—å–≤—ñ–≤", layer: buflvivLayer },
                            { label: "–í–æ–ª–∏–Ω—å", layer: volinLayer },
                            { label: "–ó–∞–∫–∞—Ä–ø–∞—Ç—Ç—è", layer: zakarpatskLayer },
                            { label: "–†—ñ–≤–Ω–µ", layer: rivneLayer },
                            { label: "–¢–µ—Ä–Ω–æ–ø—ñ–ª—å", layer: ternopilLayer },
                            { label: "–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫", layer: frankivskLayer },
                            { label: "–ß–µ—Ä–Ω—ñ–≤—Ü—ñ", layer: chernivciLayer },
                            { label: "–•–º–µ–ª—å–Ω–∏—Ü—å–∫", layer: hmelnitskLayer },
                        ]
                    },
                    { 
                        label: "<b>–ü—Ä–∏—Ä–æ–¥–æ–æ—Ö–æ—Ä–æ–Ω–Ω—ñ –¥–∞–Ω—ñ</b>", 
                        collapsed: true,  // ‚ùó –ó–≥–æ—Ä–Ω—É—Ç–∞ –≥—Ä—É–ø–∞
                        children: [
                            { label: "<span>–ü—Ç–∞—Ö–∏, –∫–∞–∂–∞–Ω–∏ (–ß–ö)</span>", layer: animalLayer },
                            { label: "<span>–†–∞–º—Å–∞—Ä—Å—å–∫–∞ –∫–æ–Ω–≤–µ–Ω—Ü—ñ—è</span>", layer: waterPolyLayer },
                            { label: "<span>–ü—Ä–∏—Ä–æ–¥–Ω–æ-–∑–∞–ø–æ–≤—ñ–¥–Ω–∏–π —Ñ–æ–Ω–¥</span>", layer: dzkPzfLayer },
                            { label: "<span>–°–º–∞—Ä–∞–≥–¥–æ–≤–∞ –º–µ—Ä–µ–∂–∞</span>", layer: emeraldLayer }
                        ]
                    },
                    { 
                        label: "<b>–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∏–π –ø–æ–¥—ñ–ª</b>", 
                        collapsed: true,
                        children: [
                        { label: "–ú–µ–∂—ñ –£–∫—Ä–∞—ó–Ω–∏", layer: borderLayer },
                        { label: "–ú–µ–∂—ñ –æ–±–ª–∞—Å—Ç–µ–π", layer: oblastLayer },
                        { label: "–ú–µ–∂—ñ —Ä–∞–π–æ–Ω—ñ–≤", layer: raionLayer },
                        { label: "–ú–µ–∂—ñ –û–¢–ì", layer: otgLayer },
                        { label: "–ö–∞–¥–∞—Å—Ç—Ä –ø—ñ–¥–∫–ª–∞–¥–∫–∞", layer: cadastrLayer },
                        ]
                    },
                    
                ]
            };

            // –î–æ–¥–∞—î–º–æ –∫–æ–Ω—Ç—Ä–æ–ª—å —à–∞—Ä—ñ–≤
            var layerControl = L.control.layers.tree(baseTree, overlaysTree, {
                namedToggle: false,  
                selectorBack: false, 
                closedSymbol: "‚ñ∂",  
                openedSymbol: "‚ñº",  
                collapsed: true
            }).addTo(map);

            function addLayersAfterAnimation() {
                setTimeout(() => {
                    // –î–æ–¥–∞—î–º–æ —à–∞—Ä–∏ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∞–Ω—ñ–º–∞—Ü—ñ—ó
                    reconsLayer.addTo(map);
                    clusterGroup110.addTo(map);
                    // geoJsonClusterGroup.addTo(map);  // —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
                    borderLayer.addTo(map);
                    legend.addTo(map);
                    
                }, 1000); // –∑–∞—Ç—Ä–∏–º–∫–∞ 4 —Å–µ–∫—É–Ω–¥–∏ (—Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –∞–Ω—ñ–º–∞—Ü—ñ—ó)
            }
                            
            addLayersAfterAnimation();

            
                // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–µ–Ω—é
            const menu = document.createElement('div');
            menu.id = 'menu';
            menu.style.position = 'absolute';
            menu.style.top = '10px';
            menu.style.left = '10px';
            menu.style.background = 'white';
            menu.style.padding = '10px';
            menu.style.display = 'none';
            menu.style.zIndex = 10000000;
            menu.style.fontFamily = '"Balsamiq Sans", sans-serif';
            menu.style.fontWeight = '400';
            menu.style.fontStyle = 'normal';
            menu.style.borderRadius = '5px';
            menu.style.boxShadow = 'rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px';
            menu.innerHTML = `
                <div style='padding-bottom: 5px; text-align: center; font-size: 20px;'>C–∑–∑ –∑–º—ñ–Ω–∞ –∫–æ–ª—å–æ—Ä—É</div>
                <label>–ö–æ–ª—ñ—Ä: <input type="color" id="colorPicker" value="#548be3"></label><br>
                <label>–ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å: <input type="range" id="opacityPicker" min="0" max="1" step="0.1" value="0.3"></label><br>
                <button id="applyBtn" style='width: 100%; margin-top: 5px; font-family: "Balsamiq Sans", sans-serif; font-weight: 400; font-style: normal;'>OK</button>
            `;
            document.body.appendChild(menu);
            // –ó–º—ñ–Ω–Ω—ñ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –æ–±—Ä–∞–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å
            let selectedColor = '#3388ff';
            let selectedOpacity = 0.5;
            document.getElementById('colorPicker').addEventListener('input', (e) => {
                selectedColor = e.target.value;
            });
            document.getElementById('opacityPicker').addEventListener('input', (e) => {
                selectedOpacity = e.target.value;
            });
            // –ö–Ω–æ–ø–∫–∞ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–µ–Ω—é
            const menuBtn = L.control({ position: 'topleft' });
            menuBtn.onAdd = function () {
                const btn = L.DomUtil.create('button', 'menu-btn');
                btn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000"><path d="M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 32.5-156t88-127Q256-817 330-848.5T488-880q80 0 151 27.5t124.5 76q53.5 48.5 85 115T880-518q0 115-70 176.5T640-280h-74q-9 0-12.5 5t-3.5 11q0 12 15 34.5t15 51.5q0 50-27.5 74T480-80Zm0-400Zm-220 40q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120-160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm200 0q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120 160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17ZM480-160q9 0 14.5-5t5.5-13q0-14-15-33t-15-57q0-42 29-67t71-25h70q66 0 113-38.5T800-518q0-121-92.5-201.5T488-800q-136 0-232 93t-96 227q0 133 93.5 226.5T480-160Z"/></svg>';
                btn.style.position = 'absolute';
                btn.style.top = '';
                btn.style.left = '45px';
                btn.style.background = 'white';
                btn.style.cursor = 'pointer';
                btn.style.borderRadius= '2px';
                btn.style.padding = '5px 3.5px 0px 3.5px;';
                btn.onclick = () => {
                    menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
                };
                return btn;
            };
            menuBtn.addTo(map);
            // –ö–Ω–æ–ø–∫–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω
            document.getElementById('applyBtn').addEventListener('click', () => {
                buflvivLayer.setStyle({color: selectedColor, fillColor: selectedColor, fillOpacity: selectedOpacity });
                volinLayer.setStyle({color: selectedColor, fillColor: selectedColor, fillOpacity: selectedOpacity });
                zakarpatskLayer.setStyle({color: selectedColor, fillColor: selectedColor, fillOpacity: selectedOpacity });
                rivneLayer.setStyle({color: selectedColor, fillColor: selectedColor, fillOpacity: selectedOpacity });
                frankivskLayer.setStyle({color: selectedColor, fillColor: selectedColor, fillOpacity: selectedOpacity });
                ternopilLayer.setStyle({color: selectedColor, fillColor: selectedColor, fillOpacity: selectedOpacity });
                chernivciLayer.setStyle({color: selectedColor, fillColor: selectedColor, fillOpacity: selectedOpacity });
                hmelnitskLayer.setStyle({color: selectedColor, fillColor: selectedColor, fillOpacity: selectedOpacity });
                menu.style.display = 'none';
            });

})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));
})
.catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoJSON (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):', error));




}
                                   
    </script>

    <!-- –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —á–µ—Ä–µ–∑ IIFE –¥–ª—è –∫–∞–¥–∞—Å—Ç—Ä—É-->
    <script>
        (async function() {
            window.Pbf = (await import("https://cdn.skypack.dev/pbf")).default;
            window.VectorTile = (await import("https://cdn.skypack.dev/@mapbox/vector-tile")).VectorTile;
        })();
    </script>
    
    <script defer src="./script-cadastr.js"></script>
</body>
</html>
