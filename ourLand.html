<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo-UA-map</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.5.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.control.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Balsamiq+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Pacifico&family=Roboto+Slab:wght@100..900&family=Sofia+Sans:ital,wght@1,1..1000&family=Ysabeau+SC:wght@1..1000&display=swap" rel="stylesheet">
    
   
    
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
        }
        #map {
            
            height: 100%;
            width: 100%;
            /*font-family: 'Open Sans', sans-serif !important;*/
            font-family: "Balsamiq Sans", sans-serif;
            font-weight: 400;
            font-style: normal;
        }
        .export-import-tooltip{
            background-color: rgba(255, 255, 128, .5);
            
        }
        .imp-exp-block{
            display: flex;
            align-items: center;
            align-content: center;
            flex-direction: column;
            background-color: white; ;
            margin-top: 30%;
        }
        .leaflet-control{
            background: white;
            border: none !important;
            box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px !important;
        }
        .leaflet-control-layers-list{
            margin: 5px;
        }
        .leaflet-control-layers-list .leaflet-layerstree-header:hover{
            /*text-decoration: underline;*/
            background-color: rgb(240, 240, 240);
            cursor: pointer;
        }
        .leaflet-control-layers {
            transition: max-height 1s ease-out, opacity 0.3s ease-out;
            max-height: 20vh; 
            overflow: hidden;
            opacity: 1;
            }

            .leaflet-control-layers:hover {
            max-height: 100vh; 
            opacity: 1;
            }
        
        /*-------------------legend---------------*/

        .leaflet-legend {
            background: white;
            padding: 5px;
            margin: 10px;
            max-width: 210px;
            display: flex;
            flex-direction: column;        
            align-content: center;
            justify-content: center;
            border-radius: 5px;
            box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            /* –í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            gap: 8px; /* –í—ñ–¥—Å—Ç—É–ø –º—ñ–∂ —ñ–∫–æ–Ω–∫–æ—é —Ç–∞ —Ç–µ–∫—Å—Ç–æ–º */

        }

        .legend-icon {
            width: 20px;
            height: 20px;
            vertical-align: middle;
        }


        .leaflet-legend .l750{
            background: #ba1806;
        }
        .leaflet-legend .l400{
            background: #f505fa;
        }
        .leaflet-legend .l330{
            background: #0572a1;
        }
        .leaflet-legend .l220{
            background: green;
        }
        .leaflet-legend .l110{
            background: #b89023;
        }
        
        .leaflet-legend div{
            display: flex;
            flex-direction: row;
            margin: 5px;
        }

        .leaflet-legend i {
            min-width: 18px;
            min-height: 18px;
            max-width: 18px;
            max-height: 18px;
            float: left;
            margin-right: 8px;
            
            opacity: 0.7;
        }
        .leaflet-legend .ves {
            background: green;
            border-radius: 50%;
            border: 2px solid black;
        }
        .leaflet-legend .p35 {
            background: rgb(1, 33, 172);
            border-radius: 50%;
            border: 2px solid black;
        }
        .leaflet-legend .z700 {
            background: rgba(15, 207, 207, 0.479);
            border-radius: 50%;
            border: 2px solid rgb(0, 247, 255);
        }
        .leaflet-legend .ses {
            background: yellow;
            border-radius: 50%;
            border: 2px solid black;
        }
        .leaflet-legend .uze{
            background: #a92dad;
            border-radius: 50%;
            border: 2px solid purple;
        }
        .leaflet-legend .all{
            background: gray;
            border-radius: 50%;
            border: 2px solid black;
        }
        .custom-tooltip {
            background-color: rgba(255, 255, 255, 0.8);
            border: 1px solid black;
            padding: 5px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
        }
        .transperent{
            background-color: #0572a1;
        }
        .leaflet-tooltip.custom-tooltip1{
            margin-top: 1.5px;
            background-color: rgba(255, 255, 255, 0);
            box-shadow: none;
            border: none;
            font-size: 14px;
            font-weight: bold;
        }
        .leaflet-tooltip.custom-tooltip1:before {
            display: none !important; /* –í–∏–º–∏–∫–∞—î —Å—Ç—Ä—ñ–ª–æ—á–∫—É */
        }
        .leaflet-tooltip.custom-tooltip110{
            margin-top: 1.5px;
            background-color: rgba(255, 255, 255, 0);
            box-shadow: none;
            border: none;
            font-size: 14px;
            font-weight: bold;
        }
        .leaflet-tooltip.custom-tooltip110:before {
            display: none !important; /* –í–∏–º–∏–∫–∞—î —Å—Ç—Ä—ñ–ª–æ—á–∫—É */
        }
        .info-control {
            padding: 3.5px 3.5px 0px 3.5px;
            border-radius: 2px;
        }
        .info-control:hover {
            cursor: pointer;
        }
        .legend i {
            display: inline-block;
            width: 20px;
            height: 15px;
            margin-right: 8px;
            border: 1px solid black;
        }

        .layer-measureboundary {
    stroke: red !important; /* –ß–µ—Ä–≤–æ–Ω–∏–π –∫–æ–ª—ñ—Ä */
    stroke-width: 4px !important; /* –¢–æ–≤—â–∏–Ω–∞ */
    opacity: 0.8 !important; /* –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å */
}

/* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è –∫—ñ–Ω—Ü–µ–≤–æ—ó –ª—ñ–Ω—ñ—ó (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è) */
.layer-measure-resultline {
    stroke: rgb(255, 0, 0) !important; /* –°–∏–Ω—ñ–π –∫–æ–ª—ñ—Ä */
    stroke-width: 4px !important; /* –¢–æ–≤—â–∏–Ω–∞ */
    opacity: 1 !important;
}

/* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è –ø–ª–æ—â—ñ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è */
.layer-measure-resultarea {
    fill: rgba(192, 70, 77, 0.3) !important; /* –ü—Ä–æ–∑–æ—Ä–∏–π –∑–µ–ª–µ–Ω–∏–π */
    stroke: rgb(255, 0, 0) !important; /* –û–±–≤–µ–¥–µ–Ω–Ω—è –∑–µ–ª–µ–Ω–µ */
    stroke-width: 4px !important;
}

/* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è —Ç–æ—á–æ–∫ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è */
.layer-measurevertex {
    fill: rgb(255, 0, 0) !important;
    stroke: black !important;
    stroke-width: 4px;
    r: 6px; /* –†–∞–¥—ñ—É—Å —Ç–æ—á–∫–∏ */
}

.leaflet-pm-text {
    font-size: 20px;  /* –ó–∞–¥–∞–π—Ç–µ –±–∞–∂–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É */
    font-weight: bold; /* –ú–æ–∂–Ω–∞ —Ç–∞–∫–æ–∂ –∑–º—ñ–Ω–∏—Ç–∏ —Ç–æ–≤—â–∏–Ω—É —à—Ä–∏—Ñ—Ç—É */
    color: red; /* –ö–æ–ª—ñ—Ä —à—Ä–∏—Ñ—Ç—É */
}
.leaflet-bottom{
    position: absolute; 
    z-index:600 !important;
}

.leaflet-control-layers-list::-webkit-scrollbar {
    width: 8px; /* –¢–æ–≤—â–∏–Ω–∞ —Å–∫—Ä–æ–ª–±–∞—Ä—É */
}

/* –ö–æ–ª—ñ—Ä —Ñ–æ–Ω—É —Å–∫—Ä–æ–ª–±–∞—Ä—É */
.leaflet-control-layers-list::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 10px;
}

/* –ö–æ–ª—ñ—Ä —Ç–∞ –≤–∏–≥–ª—è–¥ –ø–æ–≤–∑—É–Ω–∫–∞ */
.leaflet-control-layers-list::-webkit-scrollbar-thumb {
    background: #3a3a3a;
    border-radius: 10px;
}

/* –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ –∑–º—ñ–Ω—é—î–º–æ –∫–æ–ª—ñ—Ä */
.leaflet-control-layers-list::-webkit-scrollbar-thumb:hover {
    background: #555;
}

input[type="checkbox"] {
  -webkit-appearance: none;
  appearance: none;
  background-color: transparent;
  margin: 0;

  font: inherit;
  color: currentColor;
  width: 1.15em;
  height: 1.15em;
  border: 0.15em solid currentColor;
  border-radius: 0.15em;
  transform: translateY(-0.075em);

  display: grid;
  place-content: center;
}
:root {
  --form-control-color: rgb(0, 0, 0);
  --form-control-disabled: #959495;
}
.leaflet-layerstree-header-label{
    display: inline-flex;
    align-items: center;
    gap: 0.5em; /* –í—ñ–¥—Å—Ç—É–ø –º—ñ–∂ —á–µ–∫–±–æ–∫—Å–æ–º —ñ —Ç–µ–∫—Å—Ç–æ–º */
    cursor: pointer;
}
.leaflet-layerstree-header-name b{
    font-size: 1.15em;
}
input[type="checkbox"] {
  appearance: none; /* –ü—Ä–∏–±–∏—Ä–∞—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Å—Ç–∏–ª—å */
  display: inline-flex; /* –ó–∞–º—ñ—Å—Ç—å inline-block, —â–æ–± –ø—Ä–∞—Ü—é–≤–∞–≤ ::before */
  align-items: center; /* –í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è */
  justify-content: center;
  width: 1.15em;
  height: 1.15em;
  border: 0.15em solid currentColor;
  border-radius: 0.15em;
  vertical-align: middle; /* –í–∏—Ä—ñ–≤–Ω—é—î –∑ —Ç–µ–∫—Å—Ç–æ–º */
  margin-right: 0.5em; /* –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ —Ç–µ–∫—Å—Ç—É */
  position: relative; /* –í–∞–∂–ª–∏–≤–æ –¥–ª—è ::before */
}

input[type="checkbox"]::before {
  content: "";
  width: 0.75em;  /* –ó–±—ñ–ª—å—à–µ–Ω–∏–π —Ä–æ–∑–º—ñ—Ä */
  height: 0.75em;
  clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
  transform: scale(0);
  transform-origin: bottom left;
  transition: 120ms transform ease-in-out;
  box-shadow: inset 1em 1em var(--form-control-color);
  background-color: CanvasText;
}

input[type="checkbox"]:checked::before {
  transform: scale(1);
}

input[type="checkbox"]:focus {
  outline: max(2px, 0.15em) solid currentColor;
  outline-offset: max(2px, 0.15em);
}

input[type="checkbox"]:disabled {
  --form-control-color: var(--form-control-disabled);
  color: var(--form-control-disabled);
  cursor: not-allowed;
}

input[type="radio"] {
  appearance: none;
  width: 1.15em;
  height: 1.15em;
  border: 0.15em solid currentColor;
  border-radius: 50%; /* –†–æ–±–∏—Ç—å –∫–Ω–æ–ø–∫—É –∫—Ä—É–≥–ª–æ—é */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-right: 0.5em;
  position: relative;
  vertical-align: middle;
}

input[type="radio"]::before {
  content: "";
  position: absolute;
  width: 0.65em;
  height: 0.65em;
  background-color: var(--form-control-color);
  border-radius: 50%;
  transform: scale(0);
  transition: 120ms transform ease-in-out;
}

input[type="radio"]:checked::before {
  transform: scale(1);
}

.wind-legend {
  opacity: 0; /* –ü–æ—á–∞—Ç–∫–æ–≤–æ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ */
  transform: translatex(-20px); /* –õ–µ–≥–∫–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è –ø–æ—è–≤–∏ –∑–Ω–∏–∑—É */
  transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
}

.wind-legend.show {
  opacity: 1;
  transform: translateY(0);
}
        
    </style>
</head>
<body>
    
    
    
    <div id="map"></div>
    <div id="pdfViewerContainer" style="
    position: absolute;
    top: 0;
    right: 0;
    width: 850px;
    height: 97.5%;
    overflow-y: auto;
    background: white;
    border-left: 2px solid #888;
    padding: 10px;
    z-index: 1000;
    display: none;
">
   <!-- –¢–µ–≥ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ PDF --> <!-- –í–º—ñ—Å—Ç PDF -->
</div>

<!-- –§—ñ–∫—Å–æ–≤–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è (–ø—Ä–∏—Ö–æ–≤–∞–Ω–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) -->
<button id="closePDFBtn" onclick="closePDF()" style="
    position: fixed;
    top: 10px;
    right: 10px;
    z-index: 1100;
    background: #f44336;
    color: white;
    border: none;
    padding: 8px 12px;
    cursor: pointer;
    border-radius: 4px;
    display: none; /* –∫–Ω–æ–ø–∫–∞ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º */
">–ó–∞–∫—Ä–∏—Ç–∏</button>
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet.css" />
    
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.5.1/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/iso8601-js-period@0.2.1/iso8601.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/esri-leaflet.js"></script>
    
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/MarkerCluster.css" />
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/MarkerCluster.Default.css" />
<!--
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://jjimenezshaw.github.io/Leaflet.Control.Layers.Tree/L.Control.Layers.Tree.js"></script>
-->
    
    
    <!-- JavaScript –¥–ª—è MarkerCluster -->
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet.markercluster.js"></script>

    <!--line-->
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet-measure.css" />
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet-measure.js"></script>
    <!--tiffff-->
    <script src="https://cdn.jsdelivr.net/npm/georaster@1.6.0/dist/georaster.browser.bundle.min.js"></script>
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/georaster-layer-for-leaflet.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/rainbowvis.js@1.1.1/rainbowvis.js"></script>
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/geoblaze.web.min.js"></script>
    <!--derevo-->
    <link rel="stylesheet" href="L.Control.Layers.Tree.css">
    <script src="L.Control.Layers.Tree.js"></script>

    <!-- draw tool-------->
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet-geoman.css" />
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/leaflet-geoman.min.js"></script>
    <!--poligon pattern-->
<!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å—Ç–∏–ª—é –ø–ª–∞–≥—ñ–Ω–∞ Leaflet.Pattern -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-pattern/0.0.6/leaflet.pattern.min.css" />

    <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–∞–º–æ–≥–æ –ø–ª–∞–≥—ñ–Ω–∞ Leaflet.Pattern -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-pattern/0.0.6/leaflet.pattern.min.js"></script>
     <!-- –≥–ª–æ–±—É—Å -->
    <script src="https://unpkg.com/leaflet-globes"></script>
    <!-- –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –ø–æ—à—É–∫ -->
    <link rel="stylesheet" href="https://mark-000.github.io/pl-power-vis-map.github.io/libs/Control.Geocoder.css" />
    <script src="https://mark-000.github.io/pl-power-vis-map.github.io/libs/Control.Geocoder.js"></script>



    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>




    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-auth.js";
        import { getStorage, ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-storage.js";
    
        const firebaseConfig = {
            apiKey: "AIzaSyAQpI0dCWKbXACbnNi445Hro26SzrlsGdU",
            authDomain: "my-map-pj-54751.firebaseapp.com",
            projectId: "my-map-pj-54751",
            storageBucket: "my-map-pj-54751.firebasestorage.app",
            messagingSenderId: "349429907738",
            appId: "1:349429907738:web:8a6d42bfeaf8eb0b612ca3",
            measurementId: "G-T4XGCQ6PDH"
        };
    
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app); // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ auth –æ–¥–∏–Ω —Ä–∞–∑
    
        onAuthStateChanged(auth, async (user) => {
            if (!user) {
                const currentUrl = window.location.href;
                const loginUrl = `https://mark-000.github.io/pl-power-vis-map.github.io/login.html?redirect=${encodeURIComponent(currentUrl)}`;
                window.location.href = loginUrl;
            } else {
                // –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π, –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –¥–∞–Ω—ñ
                const storage = getStorage(app); // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ firebaseApp –∑ —É–∂–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º auth
                try {
                    const url1 = await getDownloadURL(ref(storage, 'ourkadnum-ur-all.geojson'));
                    const url2 = await getDownloadURL(ref(storage, 'Berdihiv/8 –í–ï–£-108–º 108024 MWh.geojson'));
    
                    const data1 = await fetch(url1).then(r => r.json());
                    const data2 = await fetch(url2).then(r => r.json());
    
                    window.loadedGeojsons = { data1, data2 }; // –ø–µ—Ä–µ–¥–∞—î–º–æ –¥–∞–Ω—ñ –¥–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É
                    window.initMap(); // –≤–∏–∫–ª–∏–∫–∞—î–º–æ –ø–æ–±—É–¥–æ–≤—É –∫–∞—Ä—Ç–∏
                } catch (error) {
                    console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤:", error);
                }
            }
        });
    </script>

    <script>
        window.initMap = function () {
            const { data1, data2 } = window.loadedGeojsons;

        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç–∏
        var map = L.map('map', {
            zoomControl: false, // –•–æ–≤–∞—î–º–æ –∫–æ–Ω—Ç—Ä–æ–ª –∑—É–º—É, —â–æ–± –Ω–µ –∑–∞–≤–∞–∂–∞–≤ –∞–Ω—ñ–º–∞—Ü—ñ—ó
            attributionControl: false, // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –∞—Ç—Ä–∏–±—É—Ü—ñ—é
            center: [20, 0], // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –≤–∏–≥–ª—è–¥ –Ω–∞ –≥–ª–æ–±—É—Å
            zoom: 5,
            globeView: true // –ê–∫—Ç–∏–≤—É—î–º–æ —Ä–µ–∂–∏–º –≥–ª–æ–±—É—Å–∞
        });

        var osmLayer = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18
        }).addTo(map);

        // –ó–∞—Ç—Ä–∏–º–∫–∞ –¥–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó - –æ–±–µ—Ä—Ç–∞–Ω–Ω—è –≥–ª–æ–±—É—Å–∞
        setTimeout(() => {
            map.flyTo([49.888509, 23.526260], 10, { // –ó–∞–¥–∞—î–º–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ç–∞ –∑—É–º
                animate: true,
                duration: 3 // –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –∞–Ω—ñ–º–∞—Ü—ñ—ó
            });
        });


        // –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–ª–∏—Ç–æ–∫ –∫–∞—Ä—Ç–∏ (OpenStreetMap)
       var WhiteLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png');

        

        // –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–ª–∏—Ç–æ–∫ Google Maps
        var googleLayer = L.tileLayer('http://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}', {
            attribution: 'Google Maps'
        });
        //topo map
        var topoLayer = L.tileLayer('https://tile.opentopomap.org/{z}/{x}/{y}.png', {
            attribution: 'opentopomap'
        });


        //-----------------------------–±—É–¥—É–≤–∞–Ω–Ω—è —à–∞—Ä—ñ–≤--------------------------------------    


//-----------------------------–∫–∞–¥–∞—Å—Ç—Ä--------------------------------------  
        var small_14_01 = L.geoJSON(data1, {
            style: function(feature) {
                // –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–ª—å–æ—Ä—É –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –∑–Ω–∞—á–µ–Ω–Ω—è "–°–µ—Ä–≤—ñ—Ç—É—Ç"
                var fillColor;
                if (feature.properties['–°–µ—Ä–≤—ñ—Ç—É—Ç'] === "True") {
                    fillColor = "#5867c4"; // –°–∏–Ω—ñ–π –¥–ª—è —Å–µ—Ä–≤—ñ—Ç—É—Ç—É
                } else if (feature.properties['–°–µ—Ä–≤—ñ—Ç—É—Ç'] === "False") {
                    fillColor = "#eb6e6e"; // –ß–µ—Ä–≤–æ–Ω–∏–π –¥–ª—è –±–µ–∑ —Å–µ—Ä–≤—ñ—Ç—É—Ç—É
                } else {
                    fillColor = "black"; // –ß–æ—Ä–Ω–∏–π –¥–ª—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö –¥–∞–Ω–∏—Ö
                }

                return {
                    fillColor: fillColor,
                    color: fillColor, // –ö–æ–ª—ñ—Ä –æ–±–≤–µ–¥–µ–Ω–Ω—è
                    weight: 2, // –¢–æ–≤—â–∏–Ω–∞ –æ–±–≤–µ–¥–µ–Ω–Ω—è
                    opacity: 1, // –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –æ–±–≤–µ–¥–µ–Ω–Ω—è
                    fillOpacity: 0.2 // –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è<button onclick="openPDF('${feature.properties["landuse.cadnum"] || feature.properties.cadnum}')">–í—ñ–¥–∫—Ä–∏—Ç–∏ PDF</button>
               
                };
            },
            onEachFeature: function(feature, layer) {
                layer.bindPopup(`
                    <b>–ù–æ–º–µ—Ä:</b> ${feature.properties["landuse.cadnum"] || feature.properties.cadnum || feature.properties.Kad || 'Unknown'}<br>
                    <b>–ü–ª–æ—â–∞:</b> ${feature.properties.area || feature.properties["_AS____________________________________________________"] || 'Unknown'}<br>
                    <b>–°–µ—Ä–≤—ñ—Ç—É—Ç:</b> ${feature.properties['–°–µ—Ä–≤—ñ—Ç—É—Ç'] || 'Unknown'}<br>
                    <b>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:</b> ${feature.properties.use || feature.properties.for || feature.properties["_TX__________________________________________________________________________"] || 'Unknown'}<br>
                    <b>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</b> ${feature.properties.category || 'Unknown'}<br>
                    <b>–Æ—Ä–∏–¥–∏—á–∫–∞:</b> ${feature.properties['–§–∞–π–ª'] || feature.properties.ur || 'ownership'}<br>
                    <div>üîó<a href="https://kadastr.live/parcel/${feature.properties["landuse.cadnum"]}" target="_blank" style="color: blue; text-decoration: underline;"> –î–µ—Ç–∞–ª—ñ –¥—ñ–ª—è–Ω–∫–∏</a></div>
                     `);
            }
        }); 

                vitryaki_Berdihiv8v2 = L.geoJSON(data2, {
                    pointToLayer: function(feature, latlng) {
                        // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω—É —ñ–∫–æ–Ω–∫—É –∑ SVG
                        var icon = L.divIcon({
                            html: `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#020dd6"><path d="M360-80v-40q0-32 24-53.5t56-26.5v-286q-22-8-38.5-23T374-544l-76 20q-36 8-68.5-6T188-578l174-44q8-41 38-68t72-30l24-90q10-35 38.5-55.5T598-878l-50 180q25 16 38.5 42t13.5 56q0 13-3 25.5t-7 24.5l54 56q25 26 29.5 61T654-374L534-494q-3 3-6.5 4.5T520-486v286q32 5 56 26.5t24 53.5v40H360Zm120-460q25 0 42.5-17.5T540-600q0-25-17.5-42.5T480-660q-25 0-42.5 17.5T420-600q0 25 17.5 42.5T480-540Z"/></svg>`,
                            className: 'no-background-icon', // –£–Ω–∏–∫–∞—î–º–æ –±—ñ–ª–æ–≥–æ —Ñ–æ–Ω—É
                            iconSize: [24, 24], // –†–æ–∑–º—ñ—Ä —ñ–∫–æ–Ω–∫–∏
                            iconAnchor: [12, 12] // –¶–µ–Ω—Ç—Ä—É—î–º–æ —ñ–∫–æ–Ω–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                        });
                        var marker = L.marker(latlng, { icon: icon });

                    marker.on('click', function() {
                        toggleCircles(latlng); // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª
                    });

                    return marker;
                }
            })


        
    
//-----------------------------–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –Ω–µ–∫--------------------------------------
                                                                                         //map.getPane('borderPane').style.zIndex = 400;
        var cadastrLayer = L.tileLayer('https://cdn.kadastr.live/tiles/raster/styles/parcels/{z}/{x}/{y}.png');
        var oblastLayer = L.tileLayer('https://cdn.kadastr.live/tiles/raster/styles/dzk__atu_oblast/{z}/{x}/{y}.png');
        var raionLayer = L.tileLayer('https://cdn.kadastr.live/tiles/raster/styles/dzk__atu_rayon/{z}/{x}/{y}.png');
        var otgLayer = L.tileLayer('https://cdn.kadastr.live/tiles/raster/styles/dzk__atu_terhromad__line/{z}/{x}/{y}.png');





//----------------------------------------------------------------shari –∫–æ–Ω—Ç—Ä–æ–ª—å —à–∞—Ä—ñ–≤-----------------------------------------------------------------
                // –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ—Ä–µ–≤–∞ —à–∞—Ä—ñ–≤
        var baseTree = {
            label: "<b>–ë–∞–∑–æ–≤—ñ –∫–∞—Ä—Ç–∏</b>",
            children: [
                { label: "OpenStreetMap", layer: osmLayer, radioGroup: "basemap" },
                { label: "White Map", layer: WhiteLayer, radioGroup: "basemap" },
                { label: "Google Map", layer: googleLayer, radioGroup: "basemap" },
                { label: "Topo Map", layer: topoLayer, radioGroup: "basemap" },
            ]
        };
        // –î–µ—Ä–µ–≤–æ —à–∞—Ä—ñ–≤
        var overlaysTree = {
            label: "<b>–®–∞—Ä–∏</b>",
            selectAllCheckbox: true,  // –î–æ–¥–∞—î —á–µ–∫–±–æ–∫—Å –¥–ª—è –≤–∏–±–æ—Ä—É –≤—Å—ñ—Ö —à–∞—Ä—ñ–≤
            children: [
                { 
                    label: "<b>–ü–æ–¥—ñ–ª</b>", 
                    collapsed: false,
                    children: [
                    { label: "–ù–∞—à—ñ –¥—ñ–ª—è–Ω–∫–∏", layer: vitryaki_Berdihiv8v2 },
                    { label: "–ù–∞—à—ñ –¥—ñ–ª—è–Ω–∫–∏", layer: small_14_01 },
                    { label: "–ö–∞–¥–∞—Å—Ç—Ä –ø—ñ–¥–∫–ª–∞–¥–∫–∞", layer: cadastrLayer },
                    { label: "–ú–µ–∂—ñ –æ–±–ª–∞—Å—Ç–µ–π", layer: oblastLayer },
                    { label: "–ú–µ–∂—ñ —Ä–∞–π–æ–Ω—ñ–≤", layer: raionLayer },
                    { label: "–ú–µ–∂—ñ –û–¢–ì", layer: otgLayer },
                    
                    ]
                },
                
            ]
        };

        // –î–æ–¥–∞—î–º–æ –∫–æ–Ω—Ç—Ä–æ–ª—å —à–∞—Ä—ñ–≤
        var layerControl = L.control.layers.tree(baseTree, overlaysTree, {
            namedToggle: false,  
            selectorBack: false, 
            closedSymbol: "‚ñ∂",  
            openedSymbol: "‚ñº",  
            collapsed: true
        }).addTo(map);




        function addLayersAfterAnimation() {
            setTimeout(() => {
                small_14_01.addTo(map)
                legend.addTo(map);
                
            }, 1000); // –∑–∞—Ç—Ä–∏–º–∫–∞ 4 —Å–µ–∫—É–Ω–¥–∏ (—Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –∞–Ω—ñ–º–∞—Ü—ñ—ó)
        }
                        
        addLayersAfterAnimation();
        

    }                             
</script>

    <!-- –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —á–µ—Ä–µ–∑ IIFE –¥–ª—è –∫–∞–¥–∞—Å—Ç—Ä—É-->
    <script>
        (async function() {
            window.Pbf = (await import("https://cdn.skypack.dev/pbf")).default;
            window.VectorTile = (await import("https://cdn.skypack.dev/@mapbox/vector-tile")).VectorTile;
        })();
    </script>
    
</body>
</html>
